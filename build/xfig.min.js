!function(){function t(t){return this._parent=t,this._root=void 0,this._children={},this._config={position:{left:0,top:0}},t._config.hasOwnProperty("annotations")?t._config.annotations.push(this._config):t._config.annotations=[this._config],t._children.hasOwnProperty("annotations")?t._children.annotations.push(this):t._children.annotations=[this],this}function n(t){return this._parent=t,this._root=void 0,this._children={},this._config={width:200,height:20,position:{left:0,top:0},text:""},t._config.hasOwnProperty("text")?t._config.text.push(this._config):t._config.text=[this._config],t._children.hasOwnProperty("text")?t._children.text.push(this):t._children.text=[this],this}function i(t){return this._parent=t,this._root=void 0,this._children={},this._config={width:200,height:28,position:{left:0,top:0},text:""},t._config.hasOwnProperty("title")?t._config.title.push(this._config):t._config.title=[this._config],t._children.hasOwnProperty("title")?t._children.title.push(this):t._children.title=[this],this}function r(t){return this._parent=t,this._root=void 0,this._children={},this._config=[{display:!0,scale:"x",label:"x",ticks:{display:!0,num:5,format:null,padding:3,innerSize:6,outerSize:6,rotation:0,direction:"out"},orient:"bottom"},{display:!0,scale:"y",label:"y",ticks:{display:!0,num:5,format:null,padding:3,innerSize:6,outerSize:6,rotation:0,direction:"out"},orient:"left"}],this._xAxis=this.axis().scale(t._xScale).orient(this._config[0].orient).ticks(this._config[0].ticks.num).innerTickSize(this._config[0].ticks.innerSize).outerTickSize(this._config[0].ticks.outerSize).tickPadding(this._config[0].ticks.padding).tickFormat(this._config[0].ticks.format),this._yAxis=this.axis().scale(t._yScale).orient(this._config[1].orient).ticks(this._config[1].ticks.num).innerTickSize(this._config[1].ticks.innerSize).outerTickSize(this._config[1].ticks.outerSize).tickPadding(this._config[1].ticks.padding).tickFormat(this._config[1].ticks.format),t._config.hasOwnProperty("axes")?t._config.axes.push(this._config):t._config.axes=[this._config],t._children.hasOwnProperty("axes")?t._children.axes.push(this):t._children.axes=[this],this}function e(t){return this._parent=t,this._root=void 0,this._children={},this._config={width:500,height:500,background:!1},t._config.hasOwnProperty("canvas")?t._config.canvas.push(this._config):t._config.canvas=[this._config],t._children.hasOwnProperty("canvas")?t._children.canvas.push(this):t._children.canvas=[this],this}function a(t){return this._config={},this._data=t,this._xValue=function(t){return t[0]},this._yValue=function(t){return t[1]},this._zValue=function(t){return t[2]},this}function o(){return this._config={},this._parent=void 0,this._root=void 0,this._children={},this}function s(t){return this._parent=t,this._root=void 0,this._children={},this._config={height:400,width:600,position:{top:80,left:90},background:!1,scales:[{name:"x",type:"linear",domain:{min:0,max:1},range:{min:0,max:600}},{name:"y",type:"linear",domain:{min:0,max:1},range:{min:0,max:400}},{name:"z",type:"linear",domain:{min:0,max:1},range:{min:0,max:1}}]},this._data=null,this._xScale=v.scale.linear().domain([this._config.scales[0].domain.min,this._config.scales[0].domain.max]).range([this._config.scales[0].range.min,this._config.scales[0].range.max]),this._yScale=v.scale.linear().domain([this._config.scales[1].domain.min,this._config.scales[1].domain.max]).range([this._config.scales[1].range.max,this._config.scales[1].range.min]),this._zScale=v.scale.linear().domain([this._config.scales[2].domain.min,this._config.scales[2].domain.max]).range([this._config.scales[2].range.min,this._config.scales[2].range.max]),t._config.hasOwnProperty("graph")?t._config.graph.push(this._config):t._config.graph=[this._config],t._children.hasOwnProperty("graph")?t._children.graph.push(this):t._children.graph=[this],this}function c(t){return this._parent=t,this._root=void 0,this._children={},this._config={type:"area",interpolation:{mode:"linear",tension:.7},labels:[]},this._data=t._data,this._transforms={x:function(n){return t._xScale(n[0])},y0:function(){return t._yScale(0)},y1:function(n){return t._yScale(0+n[1])}},this._path=this.path().x(this._transforms.x).y0(this._transforms.y0).y1(this._transforms.y1).interpolate(this._config.interpolation.mode).tension(this._config.interpolation.tension),t._config.hasOwnProperty("marks")?t._config.marks.push(this._config):t._config.marks=[this._config],t._children.hasOwnProperty("marks")?t._children.marks.push(this):t._children.marks=[this],this}function u(t){return this._parent=t,this._root=void 0,this._children={},this._config={padding:"1",labels:[]},this._data=t._data,this._transforms={x:function(n){return t._xScale(n[0])},y:function(n){return t._yScale(n[1])},width:function(n){return t._xScale(n[2])-t._xScale(n[0])},height:function(n){return t._config.height-t._yScale(n[1])}},t._config.hasOwnProperty("marks")?t._config.marks.push(this._config):t._config.marks=[this._config],t._children.hasOwnProperty("marks")?t._children.marks.push(this):t._children.marks=[this],this}function h(t){return this._parent=t,this._root=void 0,this._children={},this._config={type:"line",interpolation:{mode:"linear",tension:.7},labels:[]},this._data=t._data,this._transforms={x:function(n){return t._xScale(n[0])},y:function(n){return t._yScale(n[1])}},this._path=this.path().x(this._transforms.x).y(this._transforms.y).interpolate(this._config.interpolation.mode).tension(this._config.interpolation.tension),t._config.hasOwnProperty("marks")?t._config.marks.push(this._config):t._config.marks=[this._config],t._children.hasOwnProperty("marks")?t._children.marks.push(this):t._children.marks=[this],this}function l(t){return this._parent=t,this._root=void 0,this._children={},this._config={type:"rug",size:6,labels:[]},this._data=t._data,this._transforms={x:function(n){return t._xScale(n[0])},y:function(t){return t[1]}},this._path=this.path().x(this._transforms.x).y(this._transforms.y),t._config.hasOwnProperty("marks")?t._config.marks.push(this._config):t._config.marks=[this._config],t._children.hasOwnProperty("marks")?t._children.marks.push(this):t._children.marks=[this],this}function f(t){var n=0;return this._parent=t,this._root=void 0,this._children={},this._config={labels:[],sort:"ascending"},this._data=t._data,n=t._yScale(0)-t._yScale(1),this._transforms={x:function(n){return t._xScale(n[0])},y:function(i,r){return t._yScale(r)-n},width:function(n){return t._xScale(n[2])-t._xScale(n[0])},height:n,color:function(n){return t._zScale(n[1])}},t._config.hasOwnProperty("marks")?t._config.marks.push(this._config):t._config.marks=[this._config],t._children.hasOwnProperty("marks")?t._children.marks.push(this):t._children.marks=[this],this}function p(t){return this._parent=t,this._root=void 0,this._children={},this._config={width:600,height:400,position:{top:80,left:90},padding:{top:0,left:0},gutter:0,background:!1,scales:[{name:"x",type:"linear",domain:{min:null,max:null},range:{min:0,max:600}},{name:"y",type:"linear",domain:{min:null,max:null},range:{min:0,max:400}}],axes:[{display:!0,scale:"x",label:"x",ticks:{display:!0,num:5,format:null,padding:3,innerSize:6,outerSize:6,rotation:0,direction:"out"},orient:"bottom"},{display:!0,scale:"y",label:"y",ticks:{display:!0,num:5,format:null,padding:3,innerSize:6,outerSize:6,rotation:0,direction:"out"},orient:"left"}]},this._xScale=v.scale.linear().domain([this._config.scales[0].domain.min,this._config.scales[0].domain.max]).range([this._config.scales[0].range.min,this._config.scales[0].range.max]),this._yScale=v.scale.linear().domain([this._config.scales[1].domain.min,this._config.scales[1].domain.max]).range([this._config.scales[1].range.max,this._config.scales[1].range.min]),this._data=null,this}function g(t){return p.call(this,t),this._config.padding.top=25,this._config.padding.left=40,this._config.rows=1,this._config.cols=1,this._config.headers=[],this._config.labels=[],t._config.hasOwnProperty("panel")?t._config.panel.push(this._config):t._config.panel=[this._config],t._children.hasOwnProperty("panel")?t._children.panel.push(this):t._children.panel=[this],this}function m(){return this._kernel=b.normal(0,1),this._config={domain:{min:0,max:1,pts:Math.pow(2,14)},bandwidth:[1.06]},this._xValue=function(t){return t},this}function d(t){var n,i,r=t.length;return n=S.stdev(t),i=Math.pow(4/(3*r),.2),i*n}var _={version:"0.0.0"},y="undefined"!=typeof require,v=this.d3,w=this._;if("undefined"==typeof v){if(!y)throw new Error("xfig::missing dependency. xfig requires D3; see http://d3js.org.");v=require("d3")}if("undefined"==typeof w){if(!y)throw new Error("xfig::missing dependency. xfig requires either underscore or lodash; see http://underscorejs.org.");w=require("lodash")}t.prototype.create=function(){var t=this._parent._root,n=this._config.position;return this._root=t.append("svg:g").attr("property","annotations").attr("class","annotations").attr("transform","translate("+n.left+","+n.top+")"),this},t.prototype.position=function(t){var n=this,i="object|has_properties[left,top]";return arguments.length?(E(t,i,function(i){var r="number";if(i)throw new Error("position()::invalid input argument.");for(var e in t)if(t.hasOwnProperty(e)&&(i=E(t[e],r),i.length))throw new Error("position()::invalid input argument.");n._config.position=t}),this):this._config.position},t.prototype.left=function(t){var n=this._config.position,i="number";return arguments.length?(E(t,i,function(i){if(i)throw new Error("left()::invalid input argument.");n.left=t}),this):n.left},t.prototype.top=function(t){var n=this._config.position,i="number";return arguments.length?(E(t,i,function(i){if(i)throw new Error("top()::invalid input argument.");n.top=t}),this):n.top},t.prototype.title=function(){return new i(this)},t.prototype.text=function(){return new n(this)},t.prototype.parent=function(){return this._parent},t.prototype.config=function(){return JSON.parse(JSON.stringify(this._config))},t.prototype.children=function(){return this._children},n.prototype.create=function(t){var n=this._parent._root,i=this._config.width,r=this._config.height,e=this._config.position;return this._config.text=t,this._root=n.append("svg:foreignObject").attr("width",i).attr("height",r).attr("x",e.left).attr("y",e.top),this._root.append("xhtml:span").attr("property","annotation").attr("class","text").html(t),this},n.prototype.width=function(t){var n=this,i="number";return arguments.length?(w.isUndefined(t)||w.isNull(t)||E(t,i,function(i){if(i)throw new Error("width()::invalid input argument. ");n._config.width=t}),this):this._config.width},n.prototype.height=function(t){var n=this,i="number";return arguments.length?(w.isUndefined(t)||w.isNull(t)||E(t,i,function(i){if(i)throw new Error("width()::invalid input argument. ");n._config.height=t}),this):this._config.height},n.prototype.position=function(t){var n=this,i="object|has_properties[left,top]";return arguments.length?(E(t,i,function(i){var r="number";if(i)throw new Error("position()::invalid input argument.");for(var e in t)if(t.hasOwnProperty(e)&&(i=E(t[e],r),i.length))throw new Error("position()::invalid input argument.");n._config.position=t}),this):this._config.position},n.prototype.left=function(t){var n=this._config.position,i="number";return arguments.length?(E(t,i,function(i){if(i)throw new Error("left()::invalid input argument.");n.left=t}),this):n.left},n.prototype.top=function(t){var n=this._config.position,i="number";return arguments.length?(E(t,i,function(i){if(i)throw new Error("top()::invalid input argument.");n.top=t}),this):n.top},n.prototype.parent=function(){return this._parent},n.prototype.config=function(){return JSON.parse(JSON.stringify(this._config))},n.prototype.children=function(){return this._children},i.prototype.create=function(t){var n=this._parent._root,i=this._config.width,r=this._config.height,e=this._config.position;return this._config.text=t,this._root=n.append("svg:foreignObject").attr("width",i).attr("height",r).attr("x",e.left).attr("y",e.top),this._root.append("xhtml:span").attr("property","title").attr("class","title").html(t),this},i.prototype.width=function(t){var n=this,i="number";return arguments.length?(w.isUndefined(t)||w.isNull(t)||E(t,i,function(i){if(i)throw new Error("width()::invalid input argument. ");n._config.width=t}),this):this._config.width},i.prototype.height=function(t){var n=this,i="number";return arguments.length?(w.isUndefined(t)||w.isNull(t)||E(t,i,function(i){if(i)throw new Error("width()::invalid input argument. ");n._config.height=t}),this):this._config.height},i.prototype.position=function(t){var n=this,i="object|has_properties[left,top]";return arguments.length?(E(t,i,function(i){var r="number";if(i)throw new Error("position()::invalid input argument.");for(var e in t)if(t.hasOwnProperty(e)&&(i=E(t[e],r),i.length))throw new Error("position()::invalid input argument.");n._config.position=t}),this):this._config.position},i.prototype.left=function(t){var n=this._config.position,i="number";return arguments.length?(E(t,i,function(i){if(i)throw new Error("left()::invalid input argument.");n.left=t}),this):n.left},i.prototype.top=function(t){var n=this._config.position,i="number";return arguments.length?(E(t,i,function(i){if(i)throw new Error("top()::invalid input argument.");n.top=t}),this):n.top},i.prototype.parent=function(){return this._parent},i.prototype.config=function(){return JSON.parse(JSON.stringify(this._config))},i.prototype.children=function(){return this._children},r.prototype.create=function(){var t,n,i,r=this._parent._root,e=this._parent._config.height,a=this._parent._config.width;if(this._root=r.append("svg:g").attr("property","axes").attr("class","axes"),this._config[0].display){switch(this._config[0].ticks.direction){case"in":i="translate(0,"+-this._config[0].ticks.innerSize+")";break;case"both":i="translate(0,"+-this._config[0].ticks.innerSize/2+")";break;default:i=null}t=this._root.append("svg:g").attr("property","axis").attr("class","x axis").attr("transform","translate(0,"+e+")").call(this._xAxis),t.append("svg:text").attr("y",50).attr("x",a/2).attr("text-anchor","middle").attr("property","axis_label").attr("class","label").text(this._config[0].label),i&&t.selectAll(".tick line").attr("transform",i),t.selectAll(".tick").attr("property","axis_tick"),t.selectAll(".domain").attr("property","axis_domain")}if(this._config[1].display){switch(this._config[1].ticks.direction){case"in":i="translate("+-this._config[1].ticks.innerSize+",0)";break;case"both":i="translate("+-this._config[1].ticks.innerSize/2+",0)";break;default:i=null}n=this._root.append("svg:g").attr("property","axis").attr("class","y axis").call(this._yAxis),n.append("svg:text").attr("transform","rotate(-90)").attr("y",-72).attr("x",-e/2).attr("text-anchor","middle").attr("property","axis_label").attr("class","label").text(this._config[1].label),i&&n.selectAll(".tick line").attr("transform",i),n.selectAll(".tick").attr("property","axis_tick"),n.selectAll(".domain").attr("property","axis_domain")}return this},r.prototype.axis=function(){return v.svg.axis()},r.prototype.xLabel=function(t){var n=this,i="string";return arguments.length?(E(t,i,function(i){if(i)throw new Error("xLabel()::invalid input argument.");n._config[0].label=t}),this):this._config[0].label},r.prototype.yLabel=function(t){var n=this,i="string";return arguments.length?(E(t,i,function(i){if(i)throw new Error("yLabel()::invalid input argument.");n._config[1].label=t}),this):this._config[1].label},r.prototype.xNumTicks=function(t){var n=this,i="number";return arguments.length?(w.isUndefined(t)||w.isNull(t)?set():E(t,i,function(i){if(i)throw new Error("xNumTicks()::invalid input argument.");n._config[0].ticks.num=t,n._xAxis.ticks(t)}),this):this._config[0].ticks.num},r.prototype.yNumTicks=function(t){var n=this,i="number";return arguments.length?(w.isUndefined(t)||w.isNull(t)?set():E(t,i,function(i){if(i)throw new Error("yNumTicks()::invalid input argument.");n._config[1].ticks.num=t,n._yAxis.ticks(t)}),this):this._config[1].ticks.num},r.prototype.xTickPadding=function(t){var n=this,i="number";return arguments.length?(E(t,i,function(i){if(i)throw new Error("xTickPadding()::invalid input argument.");n._config[0].ticks.padding=t,n._xAxis.tickPadding(t)}),this):this._config[0].ticks.padding},r.prototype.yTickPadding=function(t){var n=this,i="number";return arguments.length?(E(t,i,function(i){if(i)throw new Error("yTickPadding()::invalid input argument.");n._config[1].ticks.padding=t,n._yAxis.tickPadding(t)}),this):this._config[1].ticks.padding},r.prototype.xTickRotation=function(t){var n=this,i="number";return arguments.length?(E(t,i,function(i){if(i)throw new Error("xTickRotation()::invalid input argument.");n._config[0].ticks.rotation=t}),this):this._config[0].ticks.rotation},r.prototype.yTickRotation=function(t){var n=this,i="number";return arguments.length?(E(t,i,function(i){if(i)throw new Error("yTickRotation()::invalid input argument.");n._config[1].ticks.rotation=t}),this):this._config[1].ticks.rotation},r.prototype.xInnerTickSize=function(t){var n=this,i="number";return arguments.length?(E(t,i,function(i){if(i)throw new Error("xInnerTickSize()::invalid input argument.");n._config[0].ticks.innerSize=t,n._xAxis.innerTickSize(t)}),this):this._config[0].ticks.innerSize},r.prototype.yInnerTickSize=function(t){var n=this,i="number";return arguments.length?(E(t,i,function(i){if(i)throw new Error("yInnerTickSize()::invalid input argument.");n._config[1].ticks.innerSize=t,n._yAxis.innerTickSize(t)}),this):this._config[1].ticks.innerSize},r.prototype.xOuterTickSize=function(t){var n=this,i="number";return arguments.length?(E(t,i,function(i){if(i)throw new Error("xOuterTickSize()::invalid input argument.");n._config[0].ticks.outerSize=t,n._xAxis.outerTickSize(t)}),this):this._config[0].ticks.outerSize},r.prototype.yOuterTickSize=function(t){var n=this,i="number";return arguments.length?(E(t,i,function(i){if(i)throw new Error("yOuterTickSize()::invalid input argument.");n._config[1].ticks.outerSize=t,n._yAxis.outerTickSize(t)}),this):this._config[1].ticks.outerSize},r.prototype.xTickFormat=function(t){var n,i=this,r=["%Y","%B","%b","%a","%d","%I","%p","%M","%S","%L"];return arguments.length?(-1!==r.indexOf(t)?(n="string|matches["+r.join(",")+"]",flg="time"):""===t?(n="string|empty",flg="empty"):null===t?(n="null",flg="none"):n="string",E(t,n,function(n){var r;if(n)throw new Error("xTickFormat()::invalid input arguments.");switch(flg){case"time":r=v.time.format(t);break;case"empty":r="";break;case"none":r=null;break;default:r=v.format(t)}i._config[0].ticks.format=t,i._xAxis.tickFormat(r)}),this):this._config[0].ticks.format},r.prototype.yTickFormat=function(t){var n,i=this,r=["%Y","%B","%b","%a","%d","%I","%p","%M","%S","%L"];return arguments.length?(-1!==r.indexOf(t)?(n="string|matches["+r.join(",")+"]",flg="time"):""===t?(n="string|empty",flg="empty"):null===t?(n="null",flg="none"):n="string",E(t,n,function(n){var r;if(n)throw new Error("yTickFormat()::invalid input arguments.");switch(flg){case"time":r=v.time.format(t);break;case"empty":r="";break;case"none":r=null;break;default:r=v.format(t)}i._config[1].ticks.format=t,i._yAxis.tickFormat(r)}),this):this._config[1].ticks.format},r.prototype.xTickDisplay=function(t){var n=this;return arguments.length?(function(i){if(i)throw new Error("xTickDisplay()::invalid input argument.");n._config[0].ticks.display=t}(),this):this._config[0].ticks.display},r.prototype.yTickDisplay=function(t){var n=this;return arguments.length?(function(i){if(i)throw new Error("yTickDisplay()::invalid input argument.");n._config[1].ticks.display=t}(),this):this._config[1].ticks.display},r.prototype.xTickDirection=function(t){var n=this,i="matches[in,out,both]";return arguments.length?(E(t,i,function(i){if(i)throw new Error("xTickDirection()::invalid input argument.");n._config[0].ticks.direction=t}),this):this._config[0].ticks.direction},r.prototype.yTickDirection=function(t){var n=this,i="matches[in,out,both]";return arguments.length?(E(t,i,function(i){if(i)throw new Error("yTickDirection()::invalid input argument.");n._config[1].ticks.direction=t}),this):this._config[1].ticks.direction},r.prototype.xAxisOrient=function(t){var n=this,i="matches[bottom,top]";return arguments.length?(E(t,i,function(i){if(i)throw new Error("xAxisOrient()::invalid input argument.");n._config[0].orient=t,n._xAxis.orient(t)}),this):this._config[0].orient},r.prototype.yAxisOrient=function(t){var n=this,i="matches[left,right]";return arguments.length?(E(t,i,function(i){if(i)throw new Error("yAxisOrient()::invalid input argument.");n._config[1].orient=t,n._yAxis.orient(t)}),this):this._config[1].orient},r.prototype.xAxisDisplay=function(t){var n=this;return arguments.length?(function(i){if(i)throw new Error("xAxisDisplay()::invalid input argument.");n._config[0].display=t}(),this):this._config[0].display},r.prototype.yAxisDisplay=function(t){var n=this;return arguments.length?(function(i){if(i)throw new Error("yAxisDisplay()::invalid input argument.");n._config[1].display=t}(),this):this._config[1].display},r.prototype.parent=function(){return this._parent},r.prototype.config=function(){return JSON.parse(JSON.stringify(this._config))},r.prototype.children=function(){return this._children},e.prototype.create=function(t){switch(t||(t="svg"),t){case"svg":this._root=this._svg();break;default:throw new Error("create()::unrecognized canvas type: "+t)}return this},e.prototype._svg=function(){var t,n=this._parent._root,i=this._config.width,r=this._config.height;return t=v.select(n).append("svg:svg").attr("property","canvas").attr("class","canvas").attr("width",i).attr("height",r).attr("viewBox","0 0 "+i+" "+r).attr("preserveAspectRatio","xMidYMid").attr("data-aspect",i/r)},e.prototype.width=function(t){var n=this,i="number";return arguments.length?(w.isUndefined(t)||w.isNull(t)||E(t,i,function(i){if(i)throw new Error("width()::invalid input argument. ");n._config.width=t}),this):this._config.width},e.prototype.height=function(t){var n=this,i="number";return arguments.length?(w.isUndefined(t)||w.isNull(t)||E(t,i,function(i){if(i)throw new Error("height()::invalid input argument. ");n._config.height=t}),this):this._config.height},e.prototype.background=function(t){var n=this;return arguments.length?(function(i){if(i)throw new Error("background()::invalid input argument.");n._config.background=t}(),this):this._config.background},e.prototype.parent=function(){return this._parent},e.prototype.config=function(){return JSON.parse(JSON.stringify(this._config))},e.prototype.children=function(){return this._children},a.prototype.format=function(t){var n=this._data,i=[this._xValue,this._yValue,this._zValue],r=[];if(!arguments.length)throw new Error("format()::insufficient input arguments. The number of dimensions to format must be provided.");if(1>t||t>3)throw new Error("format()::invalid input argument. Dimensionality must be an integer on the interval: [1,3].");return n=v.range(n.length).map(function(e){return n[e].map(function(a,o){r=[];for(var s=0;t>s;s++)r.push(i[s].call(n[e],a,o));return r})}),this._data=n,this},a.prototype.min=function(t){return v.min(this._data,function(n){return v.min(n,function(n){return t(n)})})},a.prototype.max=function(t){return v.max(this._data,function(n){return v.max(n,function(n){return t(n)})})},a.prototype.mean=function(t){var n=this._data.map(function(n){return n.map(function(n){return t(n)})});return n.map(function(t){return S.mean(t)})},a.prototype.variance=function(t){var n=this._data.map(function(n){return n.map(function(n){return t(n)})});return n.map(function(t){return S.variance(t)})},a.prototype.stdev=function(t){var n=this._data.map(function(n){return n.map(function(n){return t(n)})});return n.map(function(t){return S.stdev(t)})},a.prototype.median=function(t){var n=this._data.map(function(n){return n.map(function(n){return t(n)})});return n.map(function(t){return S.median(t)})},a.prototype.sum=function(t){var n=this._data.map(function(n){return n.map(function(n){return t(n)})});return n.map(function(t){return S.sum(t)})},a.prototype.reorder=function(t){var n=this;if(this._data.length!==t.length)throw new Error("reorder()::invalid input argument. Vector length must equal data length.");return this._data=t.map(function(t){return n._data[t]}),this},a.prototype.extract=function(t){return this._data=this._data.map(function(n){return n.map(function(n){return t(n)})}),this},a.prototype.concat=function(){for(var t=[[]],n=this._data.length,i=0;n>i;i++)for(var r=0;r<this._data[i].length;r++)t[0].push(this._data[i][r]);return this._data=t,this},a.prototype.amean=function(t){for(var n=this._data,i=[[]],r=0,e=n.length,a=n[0].length,o=0;a>o;o++){r=0;for(var s=0;e>s;s++)r+=t(n[s][o]);i[0].push(r/a)}return this._data=i,this},a.prototype.asum=function(t){for(var n=this._data,i=[[]],r=0,e=n.length,a=n[0].length,o=0;a>o;o++){r=0;for(var s=0;e>s;s++)r+=t(n[s][o]);i[0].push(r)}return this._data=i,this},a.prototype.amin=function(t){for(var n,i=this._data,r=[[]],e=Number.POSITIVE_INFINITY,a=i.length,o=i[0].length,s=0;o>s;s++){e=Number.POSITIVE_INFINITY;for(var c=0;a>c;c++)n=t(i[c][s]),e>n&&(e=n);r[0].push(e)}return this._data=r,this},a.prototype.amax=function(t){for(var n,i=this._data,r=[[]],e=Number.NEGATIVE_INFINITY,a=i.length,o=i[0].length,s=0;o>s;s++){e=Number.NEGATIVE_INFINITY;for(var c=0;a>c;c++)n=t(i[c][s]),n>e&&(e=n);r[0].push(e)}return this._data=r,this},a.prototype.size=function(){var t=[];return t.push(this._data.length),t.push(this._data[0].length),t},a.prototype.histc=function(t,n){var i,r,e,a=this,o=21;if(!t)throw new Error("histc()::insufficient input arguments. An data value accessor must be provided.");return this._data=v.range(this._data.length).map(function(n){return a._data[n].map(function(i,r){return t.call(a._data[n],i,r)})}),n.length||(i=this.min(function(t){return t}),r=this.max(function(t){return t}),e=(r-i)/(o-1),n=S.linspace(i,r+1e-16,e)),this._data=v.range(this._data.length).map(function(t){var i;return i=k(a._data[t],n),i=i.map(function(t,r){return[n[r-1],i[r],n[r]]}),i.slice(1,i.length-1)}),this},a.prototype.hist2c=function(t,n,i,r){var e,a,o=this,s=101,c=101;if(!t||!n)throw new Error("hist2c()::insufficient input arguments. Both an x-value and y-value accessor must be supplied.");return this._data=v.range(this._data.length).map(function(i){return o._data[i].map(function(r,e){return[t.call(o._data[i],r,e),n.call(o._data[i],r,e)]})}),i.length||(e=this.min(function(t){return t[0]}),a=this.max(function(t){return t[0]}),binWidth=(a-e)/(s-1),i=S.linspace(e,a+1e-16,binWidth)),r.length||(e=this.min(function(t){return t[1]}),a=this.max(function(t){return t[1]}),binWidth=(a-e)/(c-1),r=S.linspace(e,a+1e-16,binWidth)),this._data=x(this._data,i,r),this._data=this._data.map(function(t,n){return o._data[n].slice(1,o._data[n].length-1)}),this._data=this._data.slice(1,this._data.length-1),this},a.prototype.kde=function(t,n,i){var r=this._data,e=new m;return e.kernel(b.normal(0,1)).x(t).min(n).max(i).points(Math.pow(2,10)),this._data=e.estimator(r,"silverman").eval(r),this},a.prototype.data=function(){return this._data},a.prototype.x=function(t){var n=this,i="function";return arguments.length?(E(t,i,function(i){if(i)throw new Error("x()::invalid input argument.");n._xValue=t}),this):this._xValue},a.prototype.y=function(t){var n=this,i="function";return arguments.length?(E(t,i,function(i){if(i)throw new Error("y()::invalid input argument.");n._yValue=t}),this):this._yValue},a.prototype.z=function(t){var n=this,i="function";return arguments.length?(E(t,i,function(i){if(i)throw new Error("z()::invalid input argument.");n._zValue=t}),this):this._zValue},a.prototype.config=function(){return JSON.parse(JSON.stringify(this._config))},o.prototype.create=function(t,n){var i,r;return arguments.length<2&&(n=t.createElement("div")),this._parent=n,i=t.createElement("figure"),i.setAttribute("property","figure"),i.className+="figure",n.appendChild(i),r=n.querySelectorAll(".figure"),this._root=r[r.length-1],this},o.prototype.parent=function(){return this._parent},o.prototype.config=function(){return JSON.parse(JSON.stringify(this._config))},o.prototype.children=function(){return this._children},s.prototype.create=function(t){var n,i,r=this._parent._root,e=this._config.position,a=this._config.width,o=this._config.height,s=Date.now();return n=r.append("svg:defs").append("svg:clipPath").attr("id",s),n.append("svg:rect").attr("class","clipPath").attr("width",a).attr("height",o),this._root=r.append("svg:g").attr("property","graph").attr("class","graph").attr("data-graph-type",t?t:"none").attr("data-clipPath",s).attr("transform","translate("+e.left+","+e.top+")"),this._config.background&&(i=this._root.append("svg:rect").attr("class","background").attr("x",0).attr("y",0).attr("width",a).attr("height",o)),this},s.prototype.width=function(t){var n=this,i="number";return arguments.length?(w.isUndefined(t)||w.isNull(t)||E(t,i,function(i){var r;if(i)throw new Error("width()::invalid input argument. ");n._config.width=t,n._config.scales[0].range.max=t,r=n._xScale.range(),n._xScale.range([r[0],t])}),this):this._config.width},s.prototype.height=function(t){var n=this,i="number";return arguments.length?(w.isUndefined(t)||w.isNull(t)||E(t,i,function(i){var r;if(i)throw new Error("height()::invalid input argument. ");n._config.height=t,n._config.scales[1].range.max=t,r=n._yScale.range(),n._yScale.range([t,r[1]])}),this):this._config.height},s.prototype.xMin=function(t){var n=this,i=this._config.scales[0].domain,r="number";return arguments.length?(w.isUndefined(t)||w.isNull(t)||E(t,r,function(r){var e;if(r)throw new Error("xMin()::invalid input argument. ");i.min=t,e=n._xScale.domain(),n._xScale.domain([t,e[1]])}),this):i.min},s.prototype.xMax=function(t){var n=this,i=this._config.scales[0].domain,r="number";return arguments.length?(w.isUndefined(t)||w.isNull(t)||E(t,r,function(r){var e;if(r)throw new Error("xMax()::invalid input argument. ");i.max=t,e=n._xScale.domain(),n._xScale.domain([e[0],t])}),this):i.max},s.prototype.yMin=function(t){var n=this,i=this._config.scales[1].domain,r="number";return arguments.length?(w.isUndefined(t)||w.isNull(t)||E(t,r,function(r){var e;if(r)throw new Error("yMin()::invalid input argument. ");i.min=t,e=n._yScale.domain(),n._yScale.domain([t,e[1]])}),this):i.min},s.prototype.yMax=function(t){var n=this,i=this._config.scales[1].domain,r="number";return arguments.length?(w.isUndefined(t)||w.isNull(t)||E(t,r,function(r){var e;if(r)throw new Error("yMax()::invalid input argument. ");i.max=t,e=n._yScale.domain(),n._yScale.domain([e[0],t])}),this):i.max},s.prototype.zMin=function(t){var n=this,i=this._config.scales[2].domain,r="number";return arguments.length?(w.isUndefined(t)||w.isNull(t)||E(t,r,function(r){var e;if(r)throw new Error("zMin()::invalid input argument. ");i.min=t,e=n._zScale.domain(),n._zScale.domain([t,e[1]])}),this):i.min},s.prototype.zMax=function(t){var n=this,i=this._config.scales[2].domain,r="number";return arguments.length?(w.isUndefined(t)||w.isNull(t)||E(t,r,function(r){var e;if(r)throw new Error("zMax()::invalid input argument. ");i.max=t,e=n._zScale.domain(),n._zScale.domain([e[0],t])}),this):i.max},s.prototype.xDomain=function(t){var n=this,i=this._config.scales[0].domain,r="array";return arguments.length?(E(t,r,function(r){if(r)throw new Error("xDomain()::invalid input argument. ");i.min=t[0],i.max=t[1],n._xScale.domain(t)}),this):[i.min,i.max]},s.prototype.yDomain=function(t){var n=this,i=this._config.scales[1].domain,r="array";return arguments.length?(E(t,r,function(r){if(r)throw new Error("yDomain()::invalid input argument. ");i.min=t[0],i.max=t[1],n._yScale.domain(t)}),this):[i.min,i.max]},s.prototype.zDomain=function(t){var n=this,i=this._config.scales[2].domain,r="array";return arguments.length?(E(t,r,function(r){if(r)throw new Error("zDomain()::invalid input argument. ");i.min=t[0],i.max=t[1],n._zScale.domain(t)}),this):[i.min,i.max]},s.prototype.xRange=function(t){var n=this,i=this._config.scales[0].range,r="array";
return arguments.length?(E(t,r,function(r){if(r)throw new Error("xRange()::invalid input argument. ");i.min=t[0],i.max=t[1],n._xScale.range(t)}),this):[i.min,i.max]},s.prototype.yRange=function(t){var n=this,i=this._config.scales[1].range,r="array";return arguments.length?(E(t,r,function(r){if(r)throw new Error("yRange()::invalid input argument. ");i.min=t[1],i.max=t[0],n._yScale.range(t)}),this):[i.max,i.min]},s.prototype.zRange=function(t){var n=this,i=this._config.scales[2].range,r="array";return arguments.length?(E(t,r,function(r){if(r)throw new Error("zRange()::invalid input argument. ");i.min=t[0],i.max=t[1],n._zScale.range(t)}),this):[i.min,i.max]},s.prototype.xScale=function(t,n){var i=this;return arguments.length&&t?(this.scale(t,n,function(n,r){if(n)throw new Error("xScale()::invalid input arguments. ");i._config.scales[0].type=t,i._xScale=r.domain([i._config.scales[0].domain.min,i._config.scales[0].domain.max]).range([i._config.scales[0].range.min,i._config.scales[0].range.max])}),this):this._config.scales[0].type},s.prototype.yScale=function(t,n){var i=this;return arguments.length&&t?(this.scale(t,n,function(n,r){if(n)throw new Error("yScale()::invalid input arguments. ");i._config.scales[1].type=t,i._yScale=r.domain([i._config.scales[1].domain.min,i._config.scales[1].domain.max]).range([i._config.scales[1].range.max,i._config.scales[1].range.min])}),this):this._config.scales[1].type},s.prototype.zScale=function(t,n){var i=this;return arguments.length&&t?(this.scale(t,n,function(n,r){if(n)throw new Error("zScale()::invalid input arguments. ");i._config.scales[2].type=t,i._zScale=r.domain([i._config.scales[2].domain.min,i._config.scales[2].domain.max]).range([i._config.scales[2].range.min,i._config.scales[2].range.max])}),this):this._config.scales[2].type},s.prototype.scale=function(t,n,i){function r(){return v.scale.linear()}function e(){return v.scale.log().base(n)}function a(){return v.scale.pow().exponent(n)}function o(){return v.scale.category10()}function s(){return v.scale.category20()}function c(){return v.scale.category20b()}function u(){return v.scale.category20c()}var h="string|matches[linear,log,pow,category10,category20,category20b,category20c]",l={linear:r,log:e,pow:a,category10:o,category20:s,category20b:c,category20c:u};return E(t,h,function(n){return n?void i(n):void i(null,l[t]())}),this},s.prototype.background=function(t){var n=this;return arguments.length?(function(i){if(i)throw new Error("background()::invalid input argument.");n._config.background=t}(),this):this._config.background},s.prototype.position=function(t){var n=this,i="object|has_properties[left,top]";return arguments.length?(E(t,i,function(i){var r="number";if(i)throw new Error("position()::invalid input argument.");for(var e in t)if(t.hasOwnProperty(e)&&(i=E(t[e],r),i.length))throw new Error("position()::invalid input argument.");n._config.position=t}),this):this._config.position},s.prototype.left=function(t){var n=this._config.position,i="number";return arguments.length?(E(t,i,function(i){if(i)throw new Error("left()::invalid input argument.");n.left=t}),this):n.left},s.prototype.top=function(t){var n=this._config.position,i="number";return arguments.length?(E(t,i,function(i){if(i)throw new Error("top()::invalid input argument.");n.top=t}),this):n.top},s.prototype.data=function(t){if(!arguments.length)return this._data;if(!(t instanceof a))throw new Error("data()::invalid input argument. Input argument must be an instance of Data.");return this._data=t._data,this},s.prototype.parent=function(){return this._parent},s.prototype.config=function(){return JSON.parse(JSON.stringify(this._config))},s.prototype.children=function(){return this._children},c.prototype.create=function(){var t,n=this._parent._root,i=this._config.labels;return this._root=n.append("svg:g").attr("property","marks").attr("class","marks").attr("clip-path","url(#"+n.attr("data-clipPath")+")"),t=this._root.selectAll(".area").data(this._data).enter().append("svg:path").attr("property","area").attr("class","area").attr("data-label",function(t,n){return i[n]}).attr("d",this._path),this},c.prototype.path=function(){return v.svg.area()},c.prototype.interpolation=function(t){var n=this;return rules="string|matches[linear,linear-closed,step,step-before,step-after,basis,basis-open,basis-closed,bundle,cardinal,cardinal-open,cardinal-closed,monotone]",arguments.length?(E(t,rules,function(i){if(i)throw new Error("interpolation()::invalid input argument.");n._config.interpolation.mode=t,n._path.interpolate(t)}),this):this._config.interpolation.mode},c.prototype.tension=function(t){var n=this,i="interval[0,1]";return arguments.length?(E(t,i,function(i){if(i)throw new Error("tension()::invalid input argument.");n._config.interpolation.tension=t,n._path.tension(t)}),this):this._config.interpolation.tension},c.prototype.labels=function(t){var n=this,i="array";return arguments.length?(E(t,i,function(i){if(i)throw new Error("labels()::invalid input argument.");n._config.labels=t}),this):this._config.labels},c.prototype.parent=function(){return this._parent},c.prototype.config=function(){return JSON.parse(JSON.stringify(this._config))},c.prototype.children=function(){return this._children},u.prototype.create=function(){var t,n=this._parent._root,i=this._config.labels;return this._root=n.selectAll(".marks").data(this._data).enter().append("svg:g").attr("property","marks").attr("class","marks").attr("data-label",function(t,n){return i[n]}).attr("clip-path","url(#"+n.attr("data-clipPath")+")"),t=this._root.selectAll(".column").data(function(t){return t}).enter().append("svg:rect").attr("property","column").attr("class","column").attr("x",this._transforms.x).attr("y",this._transforms.y).attr("width",this._transforms.width).attr("height",this._transforms.height),t.append("svg:title").attr("class","tooltip").text(function(t){return Math.round(t[1])}),this},u.prototype.padding=function(t){var n=this,i="number";return arguments.length?(E(t,i,function(i){if(i)throw new Error("padding()::invalid input argument.");n._config.padding=t}),this):this._config.padding},u.prototype.labels=function(t){var n=this,i="array";return arguments.length?(E(t,i,function(i){if(i)throw new Error("labels()::invalid input argument.");n._config.labels=t}),this):this._config.labels},u.prototype.parent=function(){return this._parent},u.prototype.config=function(){return JSON.parse(JSON.stringify(this._config))},u.prototype.children=function(){return this._children},h.prototype.create=function(){var t,n=this._parent._root,i=this._config.labels;return this._root=n.append("svg:g").attr("property","marks").attr("class","marks").attr("clip-path","url(#"+n.attr("data-clipPath")+")"),t=this._root.selectAll(".line").data(this._data).enter().append("svg:path").attr("property","line").attr("class","line").attr("data-label",function(t,n){return i[n]}).attr("d",this._path),this},h.prototype.path=function(){return v.svg.line()},h.prototype.interpolation=function(t){var n=this;return rules="string|matches[linear,linear-closed,step,step-before,step-after,basis,basis-open,basis-closed,bundle,cardinal,cardinal-open,cardinal-closed,monotone]",arguments.length?(E(t,rules,function(i){if(i)throw new Error("interpolation()::invalid input argument.");n._config.interpolation.mode=t,n._path.interpolate(t)}),this):this._config.interpolation.mode},h.prototype.tension=function(t){var n=this,i="interval[0,1]";return arguments.length?(E(t,i,function(i){if(i)throw new Error("tension()::invalid input argument.");n._config.interpolation.tension=t,n._path.tension(t)}),this):this._config.interpolation.tension},h.prototype.labels=function(t){var n=this,i="array";return arguments.length?(E(t,i,function(i){if(i)throw new Error("labels()::invalid input argument.");n._config.labels=t}),this):this._config.labels},h.prototype.parent=function(){return this._parent},h.prototype.config=function(){return JSON.parse(JSON.stringify(this._config))},h.prototype.children=function(){return this._children},l.prototype.create=function(){var t,n,i=this._parent._root,r=this._parent._config.scales[1].range.max,e=this._config.labels,a=this._config.size;return this._root=i.append("svg:g").attr("property","marks").attr("class","marks").attr("clip-path","url(#"+i.attr("data-clipPath")+")"),t=this._root.selectAll(".rug").data(this._data).enter().append("svg:g").attr("property","rug").attr("class","rug").attr("data-label",function(t,n){return e[n]}).attr("transform","translate(0,"+(r-a)+")"),n=t.selectAll(".line").data(function(t){return t.map(function(t){return[[t,0],[t,a]]})}).enter().append("svg:path").attr("property","line").attr("class","line").attr("d",this._path),this},l.prototype.path=function(){return v.svg.line()},l.prototype.size=function(t){var n=this,i="number";return arguments.length?(E(t,i,function(i){if(i)throw new Error("size()::invalid input argument.");n._config.size=t}),this):this._config.size},l.prototype.labels=function(t){var n=this,i="array";return arguments.length?(E(t,i,function(i){if(i)throw new Error("labels()::invalid input argument.");n._config.labels=t}),this):this._config.labels},l.prototype.parent=function(){return this._parent},l.prototype.config=function(){return JSON.parse(JSON.stringify(this._config))},l.prototype.children=function(){return this._children},f.prototype.create=function(){var t,n,i=this,r=this._parent._root,e=this._config.labels;return this._root=r.append("svg:g").attr("property","marks").attr("class","marks").attr("clip-path","url(#"+r.attr("data-clipPath")+")").attr("transform","translate( 0, 0)"),t=this._root.selectAll(".histogram").data(this._data).enter().append("svg:g").attr("property","histogram").attr("class","histogram").attr("data-label",function(t,n){return e[n]}).attr("transform",function(t,n){return"translate( 0,"+i._transforms.y(t,n)+" )"}),n=t.selectAll(".bin").data(function(t){return t}).enter().append("svg:rect").attr("property","bin").attr("class","bin").attr("x",this._transforms.x).attr("y",0).attr("width",this._transforms.width).attr("height",this._transforms.height).style("fill",this._transforms.color),this},f.prototype.labels=function(t){var n=this,i="array";return arguments.length?(E(t,i,function(i){if(i)throw new Error("labels()::invalid input argument.");n._config.labels=t}),this):this._config.labels},f.prototype.parent=function(){return this._parent},f.prototype.config=function(){return JSON.parse(JSON.stringify(this._config))},f.prototype.children=function(){return this._children},p.prototype.padding=function(t){var n=this,i="object|has_properties[left,top]";return arguments.length?(E(t,i,function(i){var r="number";if(i)throw new Error("padding()::invalid input argument.");for(var e in t)if(t.hasOwnProperty(e)&&(i=E(t[e],r),i.length))throw new Error("padding()::invalid input argument.");n._config.padding=t}),this):this._config.padding},p.prototype.paddingLeft=function(t){var n=this._config.padding,i="number";return arguments.length?(E(t,i,function(i){if(i)throw new Error("paddingLeft()::invalid input argument.");n.left=t}),this):n.left},p.prototype.paddingTop=function(t){var n=this._config.padding,i="number";return arguments.length?(E(t,i,function(i){if(i)throw new Error("paddingTop()::invalid input argument.");n.top=t}),this):n.top},p.prototype.gutter=function(t){var n=this,i="number";return arguments.length?(E(t,i,function(i){if(i)throw new Error("gutter()::invalid input argument.");n._config.gutter=t}),this):this._config.gutter},p.prototype.width=function(t){var n=this,i="number";return arguments.length?(w.isUndefined(t)||w.isNull(t)||E(t,i,function(i){if(i)throw new Error("width()::invalid input argument. ");n._config.width=t,n._config.scales[0].range.max=t}),this):this._config.width},p.prototype.height=function(t){var n=this,i="number";return arguments.length?(w.isUndefined(t)||w.isNull(t)||E(t,i,function(i){if(i)throw new Error("height()::invalid input argument. ");n._config.height=t}),this):this._config.height},p.prototype.xMin=function(t){var n=this._config.scales[0].domain,i="number";return arguments.length?(w.isUndefined(t)||w.isNull(t)||E(t,i,function(i){if(i)throw new Error("xMin()::invalid input argument. ");n.min=t}),this):n.min},p.prototype.xMax=function(t){var n=this._config.scales[0].domain,i="number";return arguments.length?(w.isUndefined(t)||w.isNull(t)||E(t,i,function(i){if(i)throw new Error("xMax()::invalid input argument. ");n.max=t}),this):n.max},p.prototype.yMin=function(t){var n=this._config.scales[1].domain,i="number";return arguments.length?(w.isUndefined(t)||w.isNull(t)||E(t,i,function(i){if(i)throw new Error("yMin()::invalid input argument. ");n.min=t}),this):n.min},p.prototype.yMax=function(t){var n=this._config.scales[1].domain,i="number";return arguments.length?(w.isUndefined(t)||w.isNull(t)||E(t,i,function(i){if(i)throw new Error("yMax()::invalid input argument. ");n.max=t}),this):n.max},p.prototype.xDomain=function(t){var n=this._config.scales[0].domain,i="array";return arguments.length?(E(value,i,function(i){if(i)throw new Error("xDomain()::invalid input argument. ");n.min=t[0],n.max=t[1]}),this):[n.min,n.max]},p.prototype.yDomain=function(t){var n=this._config.scales[1].domain,i="array";return arguments.length?(E(value,i,function(i){if(i)throw new Error("yDomain()::invalid input argument. ");n.min=t[0],n.max=t[1]}),this):[n.min,n.max]},p.prototype.xRange=function(t){var n=this._config.scales[0].range,i="array";return arguments.length?(E(value,i,function(i){if(i)throw new Error("xRange()::invalid input argument. ");n.min=t[0],n.max=t[1]}),this):[n.min,n.max]},p.prototype.yRange=function(t){var n=this._config.scales[1].range,i="array";return arguments.length?(E(value,i,function(i){if(i)throw new Error("yRange()::invalid input argument. ");n.min=t[1],n.max=t[0]}),this):[n.max,n.min]},p.prototype.xScale=function(t,n){var i=this;return arguments.length&&t?(this.scale(t,n,function(n,r){if(n)throw new Error("xScale()::invalid input arguments. ");i._config.scales[0].type=t,i._xScale=r.domain([i._config.scales[0].domain.min,i._config.scales[0].domain.max]).range([i._config.scales[0].range.min,i._config.scales[0].range.max])}),this):this._config.scales[0].type},p.prototype.yScale=function(t,n){var i=this;return arguments.length&&t?(this.scale(t,n,function(n,r){if(n)throw new Error("yScale()::invalid input arguments. ");i._config.scales[1].type=t,i._yScale=r.domain([i._config.scales[1].domain.min,i._config.scales[1].domain.max]).range([i._config.scales[1].range.max,i._config.scales[1].range.min])}),this):this._config.scales[1].type},p.prototype.scale=function(t,n,i){var r=this,e="string|matches[linear,log,pow,category10,category20,category20b,category20c]";return E(t,e,function(n){return n?void i(n):void i(null,r._scales[t]())}),this},p.prototype._scales={},p.prototype._scales.linear=function(){return v.scale.linear()},p.prototype._scales.log=function(){return v.scale.log().base(value)},p.prototype._scales.pow=function(){return v.scale.pow().exponent(value)},p.prototype._scales.category10=function(){return v.scale.category10()},p.prototype._scales.category20=function(){return v.scale.category20()},p.prototype._scales.category20b=function(){return v.scale.category20b()},p.prototype._scales.category20c=function(){return v.scale.category20c()},p.prototype.background=function(t){var n=this;return arguments.length?(function(i){if(i)throw new Error("background()::invalid input argument.");n._config.background=t}(),this):this._config.background},p.prototype.position=function(t){var n=this,i="object|has_properties[left,top]";return arguments.length?(E(t,i,function(i){var r="number";if(i)throw new Error("position()::invalid input argument.");for(var e in t)if(t.hasOwnProperty(e)&&(i=E(t[e],r),i.length))throw new Error("position()::invalid input argument.");n._config.position=t}),this):this._config.position},p.prototype.left=function(t){var n=this._config.position,i="number";return arguments.length?(E(t,i,function(i){if(i)throw new Error("left()::invalid input argument.");n.left=t}),this):n.left},p.prototype.top=function(t){var n=this._config.position,i="number";return arguments.length?(E(t,i,function(i){if(i)throw new Error("top()::invalid input argument.");n.top=t}),this):n.top},p.prototype.data=function(t){var n=this,i="array";return arguments.length?(E(t,i,function(i){if(i)throw new Error("data()::invalid input argument.");for(var r=0;r<t.length;r++)if(!(t[r]instanceof a))throw new Error("data()::invalid input argument. Each input argument member must be an instance of Data.");n._data=t}),this):this._data},p.prototype.xLabel=function(t){var n=this,i="string";return arguments.length?(E(t,i,function(i){if(i)throw new Error("xLabel()::invalid input argument.");n._config.axes[0].label=t}),this):this._config.axes[0].label},p.prototype.yLabel=function(t){var n=this,i="string";return arguments.length?(E(t,i,function(i){if(i)throw new Error("yLabel()::invalid input argument.");n._config.axes[1].label=t}),this):this._config.axes[1].label},p.prototype.xNumTicks=function(t){var n=this,i="number";return arguments.length?(w.isUndefined(t)||w.isNull(t)?set():E(t,i,function(i){if(i)throw new Error("xNumTicks()::invalid input argument.");n._config.axes[0].ticks.num=t}),this):this._config.axes[0].ticks.num},p.prototype.yNumTicks=function(t){var n=this,i="number";return arguments.length?(w.isUndefined(t)||w.isNull(t)?set():E(t,i,function(i){if(i)throw new Error("yNumTicks()::invalid input argument.");n._config.axes[1].ticks.num=t}),this):this._config.axes[1].ticks.num},p.prototype.xTickPadding=function(t){var n=this,i="number";return arguments.length?(E(t,i,function(i){if(i)throw new Error("xTickPadding()::invalid input argument.");n._config.axes[0].ticks.padding=t}),this):this._config.axes[0].ticks.padding},p.prototype.yTickPadding=function(t){var n=this,i="number";return arguments.length?(E(t,i,function(i){if(i)throw new Error("yTickPadding()::invalid input argument.");n._config.axes[1].ticks.padding=t}),this):this._config.axes[1].ticks.padding},p.prototype.xTickRotation=function(t){var n=this,i="number";return arguments.length?(E(t,i,function(i){if(i)throw new Error("xTickRotation()::invalid input argument.");n._config.axes[0].ticks.rotation=t}),this):this._config.axes[0].ticks.rotation},p.prototype.yTickRotation=function(t){var n=this,i="number";return arguments.length?(E(t,i,function(i){if(i)throw new Error("yTickRotation()::invalid input argument.");n._config.axes[1].ticks.rotation=t}),this):this._config.axes[1].ticks.rotation},p.prototype.xInnerTickSize=function(t){var n=this,i="number";return arguments.length?(E(t,i,function(i){if(i)throw new Error("xInnerTickSize()::invalid input argument.");n._config.axes[0].ticks.innerSize=t}),this):this._config.axes[0].ticks.innerSize},p.prototype.yInnerTickSize=function(t){var n=this,i="number";return arguments.length?(E(t,i,function(i){if(i)throw new Error("yInnerTickSize()::invalid input argument.");n._config.axes[1].ticks.innerSize=t}),this):this._config.axes[1].ticks.innerSize},p.prototype.xOuterTickSize=function(t){var n=this,i="number";return arguments.length?(E(t,i,function(i){if(i)throw new Error("xOuterTickSize()::invalid input argument.");n._config.axes[0].ticks.outerSize=t}),this):this._config.axes[0].ticks.outerSize},p.prototype.yOuterTickSize=function(t){var n=this,i="number";return arguments.length?(E(t,i,function(i){if(i)throw new Error("yOuterTickSize()::invalid input argument.");n._config.axes[1].ticks.outerSize=t}),this):this._config.axes[1].ticks.outerSize},p.prototype.xTickFormat=function(t,n){var i,r=this;return arguments.length?(i=n?"string|matches[%Y,%B,%b,%a,%d,%I,%p,%M,%S,%L]":"string",E(t,i,function(n){if(n)throw new Error("xTickFormat()::invalid input arguments.");r._config.axes[0].ticks.format=t}),this):this._config.axes[0].ticks.format},p.prototype.yTickFormat=function(t,n){var i,r=this;return arguments.length?(i=n?"string|matches[%Y,%B,%b,%a,%d,%I,%p,%M,%S,%L]":"string",E(t,i,function(n){if(n)throw new Error("yTickFormat()::invalid input arguments.");r._config.axes[1].ticks.format=t}),this):this._config.axes[1].ticks.format},p.prototype.xTickDisplay=function(t){var n=this;return arguments.length?(function(i){if(i)throw new Error("xTickDisplay()::invalid input argument.");n._config.axes[0].ticks.display=t}(),this):this._config.axes[0].ticks.display},p.prototype.yTickDisplay=function(t){var n=this;return arguments.length?(function(i){if(i)throw new Error("yTickDisplay()::invalid input argument.");n._config.axes[1].ticks.display=t}(),this):this._config.axes[1].ticks.display},p.prototype.xTickDirection=function(t){var n=this,i="matches[in,out,both]";return arguments.length?(E(t,i,function(i){if(i)throw new Error("xTickDirection()::invalid input argument.");n._config.axes[0].ticks.direction=t}),this):this._config.axes[0].ticks.direction},p.prototype.yTickDirection=function(t){var n=this,i="matches[in,out,both]";return arguments.length?(E(t,i,function(i){if(i)throw new Error("yTickDirection()::invalid input argument.");n._config.axes[1].ticks.direction=t}),this):this._config.axes[1].ticks.direction},p.prototype.xAxisOrient=function(t){var n=this,i="matches[bottom,top]";return arguments.length?(E(t,i,function(i){if(i)throw new Error("xAxisOrient()::invalid input argument.");n._config.axes[0].orient=t}),this):this._config.axes[0].orient},p.prototype.yAxisOrient=function(t){var n=this,i="matches[left,right]";return arguments.length?(E(t,i,function(i){if(i)throw new Error("yAxisOrient()::invalid input argument.");n._config.axes[1].orient=t}),this):this._config.axes[1].orient},p.prototype.xAxisDisplay=function(t){var n=this;return arguments.length?(function(i){if(i)throw new Error("xAxisDisplay()::invalid input argument.");n._config.axes[0].display=t}(),this):this._config.axes[0].display},p.prototype.yAxisDisplay=function(t){var n=this;return arguments.length?(function(i){if(i)throw new Error("yAxisDisplay()::invalid input argument.");n._config.axes[1].display=t}(),this):this._config.axes[1].display},p.prototype.parent=function(){return this._parent},p.prototype.config=function(){return JSON.parse(JSON.stringify(this._config))},p.prototype.children=function(){return this._children},g.prototype=Object.create(p.prototype),g.prototype.constructor=g,g.prototype.create=function(){var t,n,i,r,e,a,o,s,c,u,h=this._config,l=this._parent._root,f=h.position,p=h.width,g=h.height,m=h.padding,d=h.gutter,_=h.rows,y=h.cols,v=this._data.length;if(v>_*y)throw new Error("create()::data number exceeds grid size. Total: "+v+"; Grid: "+_+"x"+y+".");this._root=l.append("svg:g").attr("property","panel").attr("class","panel").attr("transform","translate("+f.left+","+f.top+")"),t=Math.floor((p-d-m.left*(y-1))/y),n=Math.floor((g-54-m.top*(_-1))/_),h.scales[0].range.max=t,h.scales[1].range.max=n;for(var w=0;v>w;w++)o=Math.floor(w/y),s=w%y,c=!1,o===_-1&&(c=!0),u=!1,0===s&&(u=!0),r=(n+m.top)*o,i=(t+m.left)*s,e=this._graph(t,n,i,r,this._data[w]),a=this._axes(e,c,u);return h.headers.length&&this._headers(t),h.labels.length&&this._labels(n),this},g.prototype._graph=function(t,n,i,r,e){var a=new s(this),o=this._config;return a.width(t).height(n).position({left:i,top:r}).xMin(o.scales[0].domain.min).xMax(o.scales[0].domain.max).yMin(o.scales[1].domain.min).yMax(o.scales[1].domain.max).xRange([o.scales[0].range.min,o.scales[0].range.max]).yRange([o.scales[1].range.max,o.scales[1].range.min]).xScale(o.scales[0].type).yScale(o.scales[1].type).background(o.background).data(e),a.create()},g.prototype._axes=function(t,n,i){var e=new r(t),a=this._config;return e.yLabel(a.axes[1].label).yTickFormat(a.axes[1].ticks.format).xNumTicks(a.axes[0].ticks.num).yNumTicks(a.axes[1].ticks.num).xTickPadding(a.axes[0].ticks.padding).yTickPadding(a.axes[1].ticks.padding).xTickRotation(a.axes[0].ticks.rotation).yTickRotation(a.axes[1].ticks.rotation).xInnerTickSize(a.axes[0].ticks.innerSize).yInnerTickSize(a.axes[1].ticks.innerSize).xOuterTickSize(a.axes[0].ticks.outerSize).yOuterTickSize(a.axes[1].ticks.outerSize).xTickDirection(a.axes[0].ticks.direction).yTickDirection(a.axes[1].ticks.direction).xTickDisplay(n).yTickDisplay(a.axes[1].ticks.display).xAxisOrient(a.axes[0].orient).yAxisOrient(a.axes[1].orient).xAxisDisplay(a.axes[0].display),n?e.xLabel(a.axes[0].label).xTickFormat(a.axes[0].ticks.format):e.xLabel("").xTickFormat(""),e.yAxisDisplay(i?a.axes[1].display:!1),e.create()},g.prototype._headers=function(n){var i,r,e=this._config,a=e.cols,o=e.headers,s=e.padding.left;a!==o.length&&(a=Math.min(a,o.length)),i=new t(this),i.create();for(var c=0;a>c;c++)r=i.text().width(n).height(100).top(-35).left((n+s)*c),r.create('<span class="col-header">'+o[c]+"</span>");return this},g.prototype._labels=function(n){var i,r,e=this._config,a=e.rows,o=e.labels,s=e.width,c=e.padding.top,u=e.gutter;a!==o.length&&(a=Math.min(a,o.length)),i=new t(this),i.create();for(var h=0;a>h;h++)r=i.text().width(u-20).height(100).top(n*(h+.5)+c*h).left(s-u+20),r.create('<span class="row-label">'+o[h]+"</span>");return this},g.prototype.rows=function(t){var n=this,i="number";return arguments.length?(E(t,i,function(i){if(i)throw new Error("rows()::invalid input argument.");n._config.rows=t}),this):this._config.rows},g.prototype.cols=function(t){var n=this,i="number";return arguments.length?(E(t,i,function(i){if(i)throw new Error("cols()::invalid input argument.");n._config.cols=t}),this):this._config.cols},g.prototype.headers=function(t){var n=this,i="array";return arguments.length?(E(t,i,function(i){if(i)throw new Error("headers()::invalid input argument.");n._config.headers=t}),this):this._config.headers},g.prototype.labels=function(t){var n=this,i="array";return arguments.length?(E(t,i,function(i){if(i)throw new Error("labels()::invalid input argument.");n._config.labels=t}),this):this._config.labels};var x;!function(){"use strict";function t(t,n){var i,r=0,e=t.length;if(n<t[r])return-1;if(n>t[e-1])return e-1;for(;e>=r;)i=r+e>>1,n>t[i]?r=i+1:e=n===t[i]?-2:i-1;return n<t[i]?i-1:i}function n(n,i,r){for(var e,a,o=[],s=-1;s<i.length;s++){o[s+1]=[];for(var c=-1;c<r.length;c++)o[s+1][c+1]=0}for(var u=0;u<n.length;u++)for(var h=0;h<n[u].length;h++)e=t(i,n[u][h][0]),a=t(r,n[u][h][1]),o[e+1][a+1]+=1;return o}x=n}();var k;!function(){"use strict";function t(t,n){var i,r=0,e=t.length;if(n<t[r])return-1;if(n>t[e-1])return e-1;for(;e>=r;)i=r+e>>1,n>t[i]?r=i+1:e=n===t[i]?-2:i-1;return n<t[i]?i-1:i}function n(n,i){for(var r,e=[],a=-1;a<i.length;a++)e[a+1]=0;for(var o=0;o<n.length;o++)r=t(i,n[o]),e[r+1]+=1;return e}k=n}(),m.prototype.kernel=function(t){var n=this,i="function";return arguments.length?(E(t,i,function(i){if(i)throw new Error("kernel()::invalid input argument.");n._kernel=t}),this):this._kernel},m.prototype.bandwidth=function(t){var n=this,i="array";return arguments.length?(E(t,i,function(i){if(i)throw new Error("bandwidth()::invalid input argument.");n._config.bandwidth=t}),this):this._config.bandwidth},m.prototype.estimator=function(t,n){var i=this._xValue,r={silverman:d};if(2!==arguments.length)throw new Error("estimator()::incorrect number of input arguments. Provide data and an estimator method.");if(n=n.toLowerCase(),!r.hasOwnProperty(n))throw new Error("estimator()::unrecognized estimator method: "+n);return t=t.map(function(t){return t.map(function(t){return i(t)})}),this._config.bandwidth=t.map(function(t){return r[n](t)}),this},m.prototype.x=function(t){var n=this,i="function";return arguments.length?(E(t,i,function(i){if(i)throw new Error("x()::invalid input argument.");n._xValue=t}),this):this._xValue},m.prototype.min=function(t){var n=this._config.domain,i="number";return arguments.length?(E(t,i,function(i){if(i)throw new Error("min()::invalid input argument. ");n.min=t}),this):n.min},m.prototype.max=function(t){var n=this._config.domain,i="number";return arguments.length?(E(t,i,function(i){if(i)throw new Error("max()::invalid input argument. ");n.max=t}),this):n.max},m.prototype.domain=function(t){var n=this._config.domain,i="array";return arguments.length?(E(t,i,function(i){if(i)throw new Error("domain()::invalid input argument. ");n.min=t[0],n.max=t[1]}),this):[n.min,n.max]},m.prototype.points=function(t){var n,i=this._config.domain,r="number";return arguments.length?(E(t,r,function(r){if(r)throw new Error("pts()::invalid input argument. ");n=Math.ceil(Math.log(t)/Math.log(2)),i.pts=Math.pow(2,n)}),this):i.pts},m.prototype.eval=function(t){var n,i,r,e=[],a=[],o=this._xValue,s=this._kernel,c=this._config.bandwidth,u=this._config.domain.pts,h=this._config.domain.min,l=this._config.domain.max;if(r=(l-h)/(u-1),i=S.linspace(h,l,r),t.length!==c.length)for(var f=0;f<t.length;f++)c.push(c[0]);for(var p=0;p<t.length;p++){a=new Array(u);for(var g=0;u>g;g++){a[g]=[i[g],0];for(var m=0;m<t[p].length;m++)n=(o(t[p][m])-i[g])/c[p],a[g][1]+=s(n);a[g][1]/=c[p]*u}e.push(a)}return e},m.prototype.config=function(){return JSON.parse(JSON.stringify(this._config))};var b={version:"0.0.0"};b.normal=function(t,n){var i,r=Math.PI,e=Math.sqrt,a=Math.exp,o=1/(n*e(2*r)),s=-1/(2*n*n);return function(n){return i=n-t,o*a(s*i*i)}};var E;!function(t){"use strict";var n,i;n={isObject:function(n){var i;return t.isPlainObject(n)?void 0:(i={rule:"isObject",message:"ERROR:provided value is not an object."},[i])},hasProperties:function(t,n){var i=[];n=n.split(",");for(var r=0;r<n.length;r++)t.hasOwnProperty(n[r])||i.push({rule:"hasProperties",message:"ERROR:value does not have the following property: "+n[r]});return i},matches:function(t,n){var i;return n=n.split(","),-1===n.indexOf(t)?(i={rule:"matches",message:"ERROR:provided value does not match an allowed value: "+n},[i]):void 0},isFunction:function(n){var i;return t.isFunction(n)?void 0:(i={rule:"isFunction",message:"ERROR:provided value is not a function."},[i])},isString:function(n){var i;return t.isString(n)?void 0:(i={rule:"isString",message:"ERROR:provided value is not a string."},[i])},isArray:function(n){var i;return t.isArray(n)?void 0:(i={rule:"isArray",message:"ERROR:provided value is not an array."},[i])},greater_than:function(t,n){var i;return t<=parseFloat(n)?(i={rule:"greater_than",message:"ERROR:provided value ["+t+"] is not greater than "+parseFloat(n)},[i]):void 0},less_than:function(t,n){var i;return t>=parseFloat(n)?(i={rule:"less_than",message:"ERROR:provided value ["+t+"] is not less than "+parseFloat(n)},[i]):void 0},interval:function(t,n){var i;return n=n.split(","),t<parseFloat(n[0])?(i={rule:"interval",message:"ERROR:provided value exceeds the lower bound: "+n[0]},[i]):t>parseFloat(n[1])?(i={rule:"interval",message:"ERROR:provided value exceeds the upper bound: "+n[1]},[i]):void 0},isNumber:function(n){var i;return!t.isNumber(n)||t.isNaN(n)?(i={rule:"isNumber",message:"ERROR:provided value ["+n+"] is not a number."},[i]):void 0},isInteger:function(t){var n;return t!==+t&&t!==(0|t)?(n={rule:"isInteger",message:"ERROR:provided value ["+t+"] is not an integer."},[n]):void 0},isNull:function(n){var i;return t.isNull(n)?void 0:(i={rule:"isNull",message:"ERROR:provided value["+n+"] is not null."},[i])},isEmpty:function(n){var i;try{if(n.length)return i={rule:"isEmpty",message:"ERROR:provided value["+n+"] is not empty."},[i]}catch(r){if(t.isPlainObject(n))for(var e in n)if(n.hasOwnProperty(e))return i={rule:"isEmpty",message:"ERROR:provided value["+n+"] is not empty."},[i];return i={rule:"isEmpty",message:"ERROR:input data type is not compatible with this rule."},[i]}}},n.rule={object:n.isObject,has_properties:n.hasProperties,"function":n.isFunction,string:n.isString,array:n.isArray,integer:n.isInteger,number:n.isNumber,greater_than:n.greater_than,less_than:n.less_than,matches:n.matches,interval:n.interval,"null":n.isNull,empty:n.isEmpty},i=function(t,i,r){var e,a,o,s,c=[],u=[];c=i.split("|");for(var h=0;h<c.length;h++)if(o=null,e=c[h],a=c[h].indexOf("["),-1!==a&&(e=c[h].substr(0,a)),e!==c[h]&&(o=c[h].match(/\[([^\]]+)\]/)[1]),n.rule.hasOwnProperty(e)){if(s=n.rule[e](t,o),s&&s.length)for(var l=0;l<s.length;l++)u.push(s[l])}else u.push({rule:"unknown rule: "+c[h],message:"ERROR:unknown rule. Validation could not be performed."});
return r?u.length?void r(u):void r(null):u},E=i}(w);var S={version:"0.0.0"};S.mean=function(t){for(var n=0,i=0;i<t.length;i++)n+=t[i];return n/t.length},S.variance=function(t){for(var n,i,r=0,e=0,a=t.length,o=0;a>o;o++)r+=t[o],e+=t[o]*t[o];return n=e/(a-1),i=r*r/(a*(a-1)),n-i},S.stdev=function(t){for(var n,i,r=0,e=0,a=t.length,o=0;a>o;o++)r+=t[o],e+=t[o]*t[o];return n=e/(a-1),i=r*r/(a*(a-1)),Math.sqrt(n-i)},S.median=function(t){var n,i;return i=t.slice(),i.sort(function(t,n){return t-n}),n=Math.floor(i.length/2),i.length%2?i[n]:(i[n-1]+i[n])/2},S.sum=function(t){for(var n=0,i=0;i<t.length;i++)n+=t[i];return n},S.min=function(t){for(var n=Number.POSITIVE_INFINITY,i=0;i<t.length;i++)t[i]<n&&(n=t[i]);return n},S.max=function(t){for(var n=Number.NEGATIVE_INFINITY,i=0;i<t.length;i++)t[i]>n&&(n=t[i]);return n},S.linspace=function(t,n,i){var r,e=[];r=Math.round((n-t)/i)+1,e[0]=t,e[r-1]=n;for(var a=1;r-1>a;a++)e[a]=t+i*a;return e},_.figure=function(){return new o},_.canvas=function(t){if(!t)throw new Error("canvas()::figure selection not provided. Unable to initialize canvas generator.");if(!(t instanceof o))throw new Error("canvas()::invalid input parameter. Parameter must be a Figure instance.");return new e(t)},_.graph=function(t){if(!t)throw new Error("graph()::canvas selection not provided. Unable to initialize graph constructor.");if(!(t instanceof e))throw new Error("graph()::invalid input parameter. Argument must be a Canvas instance.");return new s(t)},_.multipanel=function(t){if(!t)throw new Error("multipanel()::canvas not provided. Unable to initialize multipanel constructor.");if(!(t instanceof e))throw new Error("multipanel()::invalid input parameter. Input argument must be a Canvas instance.");return new g(t)},_.data=function(t){if(!t)throw new Error("data()::data not provided. Unable to initialize data constructor.");if(!(t instanceof Array))throw new Error("data()::invalid input parameter. Input data must be an Array.");return new a(t)},_.axes=function(t){if(!t)throw new Error("axes()::graph not provided. Unable to initialize axes constructor.");if(!(t instanceof s))throw new Error("axes()::invalid input parameter. Input argument must be a Graph instance.");return new r(t)},_.area=function(t){if(!t)throw new Error("area()::graph not provided. Unable to initialize area constructor.");if(!(t instanceof s))throw new Error("area()::invalid input parameter. Input argument must be a Graph instance.");return new c(t)},_.line=function(t){if(!t)throw new Error("line()::graph not provided. Unable to initialize line constructor.");if(!(t instanceof s))throw new Error("line()::invalid input parameter. Input argument must be a Graph instance.");return new h(t)},_.rug=function(t){if(!t)throw new Error("rug()::graph not provided. Unable to initialize rug constructor.");if(!(t instanceof s))throw new Error("rug()::invalid input parameter. Input argument must be a Graph instance.");return new l(t)},_.histogram=function(t){if(!t)throw new Error("histogram()::graph not provided. Unable to initialize histogram constructor.");if(!(t instanceof s))throw new Error("histogram()::invalid input parameter. Input argument must be a Graph instance.");return new u(t)},_.timeserieshistogram=function(t){if(!t)throw new Error("timeserieshistogram()::graph not provided. Unable to initialize timeseries histogram constructor.");if(!(t instanceof s))throw new Error("timeserieshistogram()::invalid input parameter. Input argument must be a Graph instance.");return new f(t)},_.annotations=function(n){if(!n)throw new Error("annotations()::parent instance not provided. Unable to initialize annotations constructor.");if(!(n instanceof e||n instanceof s||n instanceof p))throw new Error("annotations()::invalid input parameter. Input argument must be ether a Canvas, Graph, or Panel instance.");return new t(n)},_.vector=S,"function"==typeof define&&define.amd?define(_):"object"==typeof module&&module.exports?module.exports=_:this.xfig=_}();