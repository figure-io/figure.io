!function(t,n){function i(t){return this._parent=t,this._root=void 0,this._children={},this._config={position:{left:0,top:0}},t._config.hasOwnProperty("annotations")?t._config.annotations.push(this._config):t._config.annotations=[this._config],t._children.hasOwnProperty("annotations")?t._children.annotations.push(this):t._children.annotations=[this],this}function r(t){return this._parent=t,this._root=void 0,this._children={},this._config={width:200,height:20,position:{left:0,top:0},text:""},t._config.hasOwnProperty("text")?t._config.text.push(this._config):t._config.text=[this._config],t._children.hasOwnProperty("text")?t._children.text.push(this):t._children.text=[this],this}function e(t){return this._parent=t,this._root=void 0,this._children={},this._config={width:200,height:28,position:{left:0,top:0},text:""},t._config.hasOwnProperty("title")?t._config.title.push(this._config):t._config.title=[this._config],t._children.hasOwnProperty("title")?t._children.title.push(this):t._children.title=[this],this}function a(t){return this._parent=t,this._root=void 0,this._children={},this._config=[{display:!0,scale:"x",label:"x",ticks:{display:!0,num:5,format:null,padding:3,innerSize:6,outerSize:6,rotation:0,direction:"out"},orient:"bottom"},{display:!0,scale:"y",label:"y",ticks:{display:!0,num:5,format:null,padding:3,innerSize:6,outerSize:6,rotation:0,direction:"out"},orient:"left"}],this._xAxis=this.axis().scale(t._xScale).orient(this._config[0].orient).ticks(this._config[0].ticks.num).innerTickSize(this._config[0].ticks.innerSize).outerTickSize(this._config[0].ticks.outerSize).tickPadding(this._config[0].ticks.padding).tickFormat(this._config[0].ticks.format),this._yAxis=this.axis().scale(t._yScale).orient(this._config[1].orient).ticks(this._config[1].ticks.num).innerTickSize(this._config[1].ticks.innerSize).outerTickSize(this._config[1].ticks.outerSize).tickPadding(this._config[1].ticks.padding).tickFormat(this._config[1].ticks.format),t._config.hasOwnProperty("axes")?t._config.axes.push(this._config):t._config.axes=[this._config],t._children.hasOwnProperty("axes")?t._children.axes.push(this):t._children.axes=[this],this}function o(t){return this._parent=t,this._root=void 0,this._children={},this._config={width:500,height:500,background:!1},t._config.hasOwnProperty("canvas")?t._config.canvas.push(this._config):t._config.canvas=[this._config],t._children.hasOwnProperty("canvas")?t._children.canvas.push(this):t._children.canvas=[this],this}function s(t){return this._config={},this._data=t,this._xValue=function(t){return t[0]},this._yValue=function(t){return t[1]},this._zValue=function(t){return t[2]},this}function c(){return this._config={},this._parent=void 0,this._root=void 0,this._children={},this}function u(n){return this._parent=n,this._root=void 0,this._children={},this._config={height:400,width:600,position:{top:80,left:90},background:!1,scales:[{name:"x",type:"linear",domain:{min:0,max:1},range:{min:0,max:600}},{name:"y",type:"linear",domain:{min:0,max:1},range:{min:0,max:400}},{name:"z",type:"linear",domain:{min:0,max:1},range:{min:0,max:1}}]},this._data=null,this._xScale=t.scale.linear().domain([this._config.scales[0].domain.min,this._config.scales[0].domain.max]).range([this._config.scales[0].range.min,this._config.scales[0].range.max]),this._yScale=t.scale.linear().domain([this._config.scales[1].domain.min,this._config.scales[1].domain.max]).range([this._config.scales[1].range.max,this._config.scales[1].range.min]),this._zScale=t.scale.linear().domain([this._config.scales[2].domain.min,this._config.scales[2].domain.max]).range([this._config.scales[2].range.min,this._config.scales[2].range.max]),n._config.hasOwnProperty("graph")?n._config.graph.push(this._config):n._config.graph=[this._config],n._children.hasOwnProperty("graph")?n._children.graph.push(this):n._children.graph=[this],this}function h(t){return this._parent=t,this._root=void 0,this._children={},this._config={type:"area",interpolation:{mode:"linear",tension:.7},labels:[]},this._data=t._data,this._transforms={x:function(n){return t._xScale(n[0])},y0:function(){return t._yScale(0)},y1:function(n){return t._yScale(0+n[1])}},this._path=this.path().x(this._transforms.x).y0(this._transforms.y0).y1(this._transforms.y1).interpolate(this._config.interpolation.mode).tension(this._config.interpolation.tension),t._config.hasOwnProperty("marks")?t._config.marks.push(this._config):t._config.marks=[this._config],t._children.hasOwnProperty("marks")?t._children.marks.push(this):t._children.marks=[this],this}function l(t){return this._parent=t,this._root=void 0,this._children={},this._config={padding:"1",labels:[]},this._data=t._data,this._transforms={x:function(n){return t._xScale(n[0])},y:function(n){return t._yScale(n[1])},width:function(n){return t._xScale(n[2])-t._xScale(n[0])},height:function(n){return t._config.height-t._yScale(n[1])}},t._config.hasOwnProperty("marks")?t._config.marks.push(this._config):t._config.marks=[this._config],t._children.hasOwnProperty("marks")?t._children.marks.push(this):t._children.marks=[this],this}function f(t){return this._parent=t,this._root=void 0,this._children={},this._config={type:"line",interpolation:{mode:"linear",tension:.7},labels:[]},this._data=t._data,this._transforms={x:function(n){return t._xScale(n[0])},y:function(n){return t._yScale(n[1])}},this._path=this.path().x(this._transforms.x).y(this._transforms.y).interpolate(this._config.interpolation.mode).tension(this._config.interpolation.tension),t._config.hasOwnProperty("marks")?t._config.marks.push(this._config):t._config.marks=[this._config],t._children.hasOwnProperty("marks")?t._children.marks.push(this):t._children.marks=[this],this}function p(t){return this._parent=t,this._root=void 0,this._children={},this._config={type:"rug",size:6,labels:[]},this._data=t._data,this._transforms={x:function(n){return t._xScale(n[0])},y:function(t){return t[1]}},this._path=this.path().x(this._transforms.x).y(this._transforms.y),t._config.hasOwnProperty("marks")?t._config.marks.push(this._config):t._config.marks=[this._config],t._children.hasOwnProperty("marks")?t._children.marks.push(this):t._children.marks=[this],this}function g(t){var n=0;return this._parent=t,this._root=void 0,this._children={},this._config={labels:[],sort:"ascending"},this._data=t._data,n=t._yScale(0)-t._yScale(1),this._transforms={x:function(n){return t._xScale(n[0])},y:function(i,r){return t._yScale(r)-n},width:function(n){return t._xScale(n[2])-t._xScale(n[0])},height:n,color:function(n){return t._zScale(n[1])}},t._config.hasOwnProperty("marks")?t._config.marks.push(this._config):t._config.marks=[this._config],t._children.hasOwnProperty("marks")?t._children.marks.push(this):t._children.marks=[this],this}function m(n){return this._parent=n,this._root=void 0,this._children={},this._config={width:600,height:400,position:{top:80,left:90},padding:{top:0,left:0},gutter:0,background:!1,scales:[{name:"x",type:"linear",domain:{min:null,max:null},range:{min:0,max:600}},{name:"y",type:"linear",domain:{min:null,max:null},range:{min:0,max:400}}],axes:[{display:!0,scale:"x",label:"x",ticks:{display:!0,num:5,format:null,padding:3,innerSize:6,outerSize:6,rotation:0,direction:"out"},orient:"bottom"},{display:!0,scale:"y",label:"y",ticks:{display:!0,num:5,format:null,padding:3,innerSize:6,outerSize:6,rotation:0,direction:"out"},orient:"left"}]},this._xScale=t.scale.linear().domain([this._config.scales[0].domain.min,this._config.scales[0].domain.max]).range([this._config.scales[0].range.min,this._config.scales[0].range.max]),this._yScale=t.scale.linear().domain([this._config.scales[1].domain.min,this._config.scales[1].domain.max]).range([this._config.scales[1].range.max,this._config.scales[1].range.min]),this._data=null,this}function d(t){return m.call(this,t),this._config.padding.top=25,this._config.padding.left=40,this._config.rows=1,this._config.cols=1,this._config.headers=[],this._config.labels=[],t._config.hasOwnProperty("panel")?t._config.panel.push(this._config):t._config.panel=[this._config],t._children.hasOwnProperty("panel")?t._children.panel.push(this):t._children.panel=[this],this}function _(){return this._kernel=k.normal(0,1),this._config={domain:{min:0,max:1,pts:Math.pow(2,14)},bandwidth:[1.06]},this._xValue=function(t){return t},this}function y(t){var n,i,r=t.length;return n=E.stdev(t),i=Math.pow(4/(3*r),.2),i*n}var v={version:"0.0.0"};i.prototype.create=function(){var t=this._parent._root,n=this._config.position;return this._root=t.append("svg:g").attr("property","annotations").attr("class","annotations").attr("transform","translate("+n.left+","+n.top+")"),this},i.prototype.position=function(t){var n=this,i="object|has_properties[left,top]";return arguments.length?(b(t,i,function(i){var r="number";if(i)throw new Error("position()::invalid input argument.");for(var e in t)if(t.hasOwnProperty(e)&&(i=b(t[e],r),i.length))throw new Error("position()::invalid input argument.");n._config.position=t}),this):this._config.position},i.prototype.left=function(t){var n=this._config.position,i="number";return arguments.length?(b(t,i,function(i){if(i)throw new Error("left()::invalid input argument.");n.left=t}),this):n.left},i.prototype.top=function(t){var n=this._config.position,i="number";return arguments.length?(b(t,i,function(i){if(i)throw new Error("top()::invalid input argument.");n.top=t}),this):n.top},i.prototype.title=function(){return new e(this)},i.prototype.text=function(){return new r(this)},i.prototype.parent=function(){return this._parent},i.prototype.config=function(){return JSON.parse(JSON.stringify(this._config))},i.prototype.children=function(){return this._children},r.prototype.create=function(t){var n=this._parent._root,i=this._config.width,r=this._config.height,e=this._config.position;return this._config.text=t,this._root=n.append("svg:foreignObject").attr("width",i).attr("height",r).attr("x",e.left).attr("y",e.top),this._root.append("xhtml:span").attr("property","annotation").attr("class","text").html(t),this},r.prototype.width=function(t){var i=this,r="number";return arguments.length?(n.isUndefined(t)||n.isNull(t)||b(t,r,function(n){if(n)throw new Error("width()::invalid input argument. ");i._config.width=t}),this):this._config.width},r.prototype.height=function(t){var i=this,r="number";return arguments.length?(n.isUndefined(t)||n.isNull(t)||b(t,r,function(n){if(n)throw new Error("width()::invalid input argument. ");i._config.height=t}),this):this._config.height},r.prototype.position=function(t){var n=this,i="object|has_properties[left,top]";return arguments.length?(b(t,i,function(i){var r="number";if(i)throw new Error("position()::invalid input argument.");for(var e in t)if(t.hasOwnProperty(e)&&(i=b(t[e],r),i.length))throw new Error("position()::invalid input argument.");n._config.position=t}),this):this._config.position},r.prototype.left=function(t){var n=this._config.position,i="number";return arguments.length?(b(t,i,function(i){if(i)throw new Error("left()::invalid input argument.");n.left=t}),this):n.left},r.prototype.top=function(t){var n=this._config.position,i="number";return arguments.length?(b(t,i,function(i){if(i)throw new Error("top()::invalid input argument.");n.top=t}),this):n.top},r.prototype.parent=function(){return this._parent},r.prototype.config=function(){return JSON.parse(JSON.stringify(this._config))},r.prototype.children=function(){return this._children},e.prototype.create=function(t){var n=this._parent._root,i=this._config.width,r=this._config.height,e=this._config.position;return this._config.text=t,this._root=n.append("svg:foreignObject").attr("width",i).attr("height",r).attr("x",e.left).attr("y",e.top),this._root.append("xhtml:span").attr("property","title").attr("class","title").html(t),this},e.prototype.width=function(t){var i=this,r="number";return arguments.length?(n.isUndefined(t)||n.isNull(t)||b(t,r,function(n){if(n)throw new Error("width()::invalid input argument. ");i._config.width=t}),this):this._config.width},e.prototype.height=function(t){var i=this,r="number";return arguments.length?(n.isUndefined(t)||n.isNull(t)||b(t,r,function(n){if(n)throw new Error("width()::invalid input argument. ");i._config.height=t}),this):this._config.height},e.prototype.position=function(t){var n=this,i="object|has_properties[left,top]";return arguments.length?(b(t,i,function(i){var r="number";if(i)throw new Error("position()::invalid input argument.");for(var e in t)if(t.hasOwnProperty(e)&&(i=b(t[e],r),i.length))throw new Error("position()::invalid input argument.");n._config.position=t}),this):this._config.position},e.prototype.left=function(t){var n=this._config.position,i="number";return arguments.length?(b(t,i,function(i){if(i)throw new Error("left()::invalid input argument.");n.left=t}),this):n.left},e.prototype.top=function(t){var n=this._config.position,i="number";return arguments.length?(b(t,i,function(i){if(i)throw new Error("top()::invalid input argument.");n.top=t}),this):n.top},e.prototype.parent=function(){return this._parent},e.prototype.config=function(){return JSON.parse(JSON.stringify(this._config))},e.prototype.children=function(){return this._children},a.prototype.create=function(){var t,n,i,r=this._parent._root,e=this._parent._config.height,a=this._parent._config.width;if(this._root=r.append("svg:g").attr("property","axes").attr("class","axes"),this._config[0].display){switch(this._config[0].ticks.direction){case"in":i="translate(0,"+-this._config[0].ticks.innerSize+")";break;case"both":i="translate(0,"+-this._config[0].ticks.innerSize/2+")";break;default:i=null}t=this._root.append("svg:g").attr("property","axis").attr("class","x axis").attr("transform","translate(0,"+e+")").call(this._xAxis),t.append("svg:text").attr("y",50).attr("x",a/2).attr("text-anchor","middle").attr("property","axis_label").attr("class","label").text(this._config[0].label),i&&t.selectAll(".tick line").attr("transform",i),t.selectAll(".tick").attr("property","axis_tick"),t.selectAll(".domain").attr("property","axis_domain")}if(this._config[1].display){switch(this._config[1].ticks.direction){case"in":i="translate("+-this._config[1].ticks.innerSize+",0)";break;case"both":i="translate("+-this._config[1].ticks.innerSize/2+",0)";break;default:i=null}n=this._root.append("svg:g").attr("property","axis").attr("class","y axis").call(this._yAxis),n.append("svg:text").attr("transform","rotate(-90)").attr("y",-72).attr("x",-e/2).attr("text-anchor","middle").attr("property","axis_label").attr("class","label").text(this._config[1].label),i&&n.selectAll(".tick line").attr("transform",i),n.selectAll(".tick").attr("property","axis_tick"),n.selectAll(".domain").attr("property","axis_domain")}return this},a.prototype.axis=function(){return t.svg.axis()},a.prototype.xLabel=function(t){var n=this,i="string";return arguments.length?(b(t,i,function(i){if(i)throw new Error("xLabel()::invalid input argument.");n._config[0].label=t}),this):this._config[0].label},a.prototype.yLabel=function(t){var n=this,i="string";return arguments.length?(b(t,i,function(i){if(i)throw new Error("yLabel()::invalid input argument.");n._config[1].label=t}),this):this._config[1].label},a.prototype.xNumTicks=function(t){var i=this,r="number";return arguments.length?(n.isUndefined(t)||n.isNull(t)?set():b(t,r,function(n){if(n)throw new Error("xNumTicks()::invalid input argument.");i._config[0].ticks.num=t,i._xAxis.ticks(t)}),this):this._config[0].ticks.num},a.prototype.yNumTicks=function(t){var i=this,r="number";return arguments.length?(n.isUndefined(t)||n.isNull(t)?set():b(t,r,function(n){if(n)throw new Error("yNumTicks()::invalid input argument.");i._config[1].ticks.num=t,i._yAxis.ticks(t)}),this):this._config[1].ticks.num},a.prototype.xTickPadding=function(t){var n=this,i="number";return arguments.length?(b(t,i,function(i){if(i)throw new Error("xTickPadding()::invalid input argument.");n._config[0].ticks.padding=t,n._xAxis.tickPadding(t)}),this):this._config[0].ticks.padding},a.prototype.yTickPadding=function(t){var n=this,i="number";return arguments.length?(b(t,i,function(i){if(i)throw new Error("yTickPadding()::invalid input argument.");n._config[1].ticks.padding=t,n._yAxis.tickPadding(t)}),this):this._config[1].ticks.padding},a.prototype.xTickRotation=function(t){var n=this,i="number";return arguments.length?(b(t,i,function(i){if(i)throw new Error("xTickRotation()::invalid input argument.");n._config[0].ticks.rotation=t}),this):this._config[0].ticks.rotation},a.prototype.yTickRotation=function(t){var n=this,i="number";return arguments.length?(b(t,i,function(i){if(i)throw new Error("yTickRotation()::invalid input argument.");n._config[1].ticks.rotation=t}),this):this._config[1].ticks.rotation},a.prototype.xInnerTickSize=function(t){var n=this,i="number";return arguments.length?(b(t,i,function(i){if(i)throw new Error("xInnerTickSize()::invalid input argument.");n._config[0].ticks.innerSize=t,n._xAxis.innerTickSize(t)}),this):this._config[0].ticks.innerSize},a.prototype.yInnerTickSize=function(t){var n=this,i="number";return arguments.length?(b(t,i,function(i){if(i)throw new Error("yInnerTickSize()::invalid input argument.");n._config[1].ticks.innerSize=t,n._yAxis.innerTickSize(t)}),this):this._config[1].ticks.innerSize},a.prototype.xOuterTickSize=function(t){var n=this,i="number";return arguments.length?(b(t,i,function(i){if(i)throw new Error("xOuterTickSize()::invalid input argument.");n._config[0].ticks.outerSize=t,n._xAxis.outerTickSize(t)}),this):this._config[0].ticks.outerSize},a.prototype.yOuterTickSize=function(t){var n=this,i="number";return arguments.length?(b(t,i,function(i){if(i)throw new Error("yOuterTickSize()::invalid input argument.");n._config[1].ticks.outerSize=t,n._yAxis.outerTickSize(t)}),this):this._config[1].ticks.outerSize},a.prototype.xTickFormat=function(n){var i,r=this,e=["%Y","%B","%b","%a","%d","%I","%p","%M","%S","%L"];return arguments.length?(-1!==e.indexOf(n)?(i="string|matches["+e.join(",")+"]",flg="time"):""===n?(i="string|empty",flg="empty"):null===n?(i="null",flg="none"):i="string",b(n,i,function(i){var e;if(i)throw new Error("xTickFormat()::invalid input arguments.");switch(flg){case"time":e=t.time.format(n);break;case"empty":e="";break;case"none":e=null;break;default:e=t.format(n)}r._config[0].ticks.format=n,r._xAxis.tickFormat(e)}),this):this._config[0].ticks.format},a.prototype.yTickFormat=function(n){var i,r=this,e=["%Y","%B","%b","%a","%d","%I","%p","%M","%S","%L"];return arguments.length?(-1!==e.indexOf(n)?(i="string|matches["+e.join(",")+"]",flg="time"):""===n?(i="string|empty",flg="empty"):null===n?(i="null",flg="none"):i="string",b(n,i,function(i){var e;if(i)throw new Error("yTickFormat()::invalid input arguments.");switch(flg){case"time":e=t.time.format(n);break;case"empty":e="";break;case"none":e=null;break;default:e=t.format(n)}r._config[1].ticks.format=n,r._yAxis.tickFormat(e)}),this):this._config[1].ticks.format},a.prototype.xTickDisplay=function(t){var n=this;return arguments.length?(function(i){if(i)throw new Error("xTickDisplay()::invalid input argument.");n._config[0].ticks.display=t}(),this):this._config[0].ticks.display},a.prototype.yTickDisplay=function(t){var n=this;return arguments.length?(function(i){if(i)throw new Error("yTickDisplay()::invalid input argument.");n._config[1].ticks.display=t}(),this):this._config[1].ticks.display},a.prototype.xTickDirection=function(t){var n=this,i="matches[in,out,both]";return arguments.length?(b(t,i,function(i){if(i)throw new Error("xTickDirection()::invalid input argument.");n._config[0].ticks.direction=t}),this):this._config[0].ticks.direction},a.prototype.yTickDirection=function(t){var n=this,i="matches[in,out,both]";return arguments.length?(b(t,i,function(i){if(i)throw new Error("yTickDirection()::invalid input argument.");n._config[1].ticks.direction=t}),this):this._config[1].ticks.direction},a.prototype.xAxisOrient=function(t){var n=this,i="matches[bottom,top]";return arguments.length?(b(t,i,function(i){if(i)throw new Error("xAxisOrient()::invalid input argument.");n._config[0].orient=t,n._xAxis.orient(t)}),this):this._config[0].orient},a.prototype.yAxisOrient=function(t){var n=this,i="matches[left,right]";return arguments.length?(b(t,i,function(i){if(i)throw new Error("yAxisOrient()::invalid input argument.");n._config[1].orient=t,n._yAxis.orient(t)}),this):this._config[1].orient},a.prototype.xAxisDisplay=function(t){var n=this;return arguments.length?(function(i){if(i)throw new Error("xAxisDisplay()::invalid input argument.");n._config[0].display=t}(),this):this._config[0].display},a.prototype.yAxisDisplay=function(t){var n=this;return arguments.length?(function(i){if(i)throw new Error("yAxisDisplay()::invalid input argument.");n._config[1].display=t}(),this):this._config[1].display},a.prototype.parent=function(){return this._parent},a.prototype.config=function(){return JSON.parse(JSON.stringify(this._config))},a.prototype.children=function(){return this._children},o.prototype.create=function(t){switch(t||(t="svg"),t){case"svg":this._root=this._svg();break;default:throw new Error("create()::unrecognized canvas type: "+t)}return this},o.prototype._svg=function(){var n,i=this._parent._root,r=this._config.width,e=this._config.height;return n=t.select(i).append("svg:svg").attr("property","canvas").attr("class","canvas").attr("width",r).attr("height",e).attr("viewBox","0 0 "+r+" "+e).attr("preserveAspectRatio","xMidYMid").attr("data-aspect",r/e)},o.prototype.width=function(t){var i=this,r="number";return arguments.length?(n.isUndefined(t)||n.isNull(t)||b(t,r,function(n){if(n)throw new Error("width()::invalid input argument. ");i._config.width=t}),this):this._config.width},o.prototype.height=function(t){var i=this,r="number";return arguments.length?(n.isUndefined(t)||n.isNull(t)||b(t,r,function(n){if(n)throw new Error("height()::invalid input argument. ");i._config.height=t}),this):this._config.height},o.prototype.background=function(t){var n=this;return arguments.length?(function(i){if(i)throw new Error("background()::invalid input argument.");n._config.background=t}(),this):this._config.background},o.prototype.parent=function(){return this._parent},o.prototype.config=function(){return JSON.parse(JSON.stringify(this._config))},o.prototype.children=function(){return this._children},s.prototype.format=function(n){var i=this._data,r=[this._xValue,this._yValue,this._zValue],e=[];if(!arguments.length)throw new Error("format()::insufficient input arguments. The number of dimensions to format must be provided.");if(1>n||n>3)throw new Error("format()::invalid input argument. Dimensionality must be an integer on the interval: [1,3].");return i=t.range(i.length).map(function(t){return i[t].map(function(a,o){e=[];for(var s=0;n>s;s++)e.push(r[s].call(i[t],a,o));return e})}),this._data=i,this},s.prototype.min=function(n){return t.min(this._data,function(i){return t.min(i,function(t){return n(t)})})},s.prototype.max=function(n){return t.max(this._data,function(i){return t.max(i,function(t){return n(t)})})},s.prototype.mean=function(t){var n=this._data.map(function(n){return n.map(function(n){return t(n)})});return n.map(function(t){return E.mean(t)})},s.prototype.variance=function(t){var n=this._data.map(function(n){return n.map(function(n){return t(n)})});return n.map(function(t){return E.variance(t)})},s.prototype.stdev=function(t){var n=this._data.map(function(n){return n.map(function(n){return t(n)})});return n.map(function(t){return E.stdev(t)})},s.prototype.median=function(t){var n=this._data.map(function(n){return n.map(function(n){return t(n)})});return n.map(function(t){return E.median(t)})},s.prototype.sum=function(t){var n=this._data.map(function(n){return n.map(function(n){return t(n)})});return n.map(function(t){return E.sum(t)})},s.prototype.reorder=function(t){var n=this;if(this._data.length!==t.length)throw new Error("reorder()::invalid input argument. Vector length must equal data length.");return this._data=t.map(function(t){return n._data[t]}),this},s.prototype.extract=function(t){return this._data=this._data.map(function(n){return n.map(function(n){return t(n)})}),this},s.prototype.concat=function(){for(var t=[[]],n=this._data.length,i=0;n>i;i++)for(var r=0;r<this._data[i].length;r++)t[0].push(this._data[i][r]);return this._data=t,this},s.prototype.amean=function(t){for(var n=this._data,i=[[]],r=0,e=n.length,a=n[0].length,o=0;a>o;o++){r=0;for(var s=0;e>s;s++)r+=t(n[s][o]);i[0].push(r/a)}return this._data=i,this},s.prototype.asum=function(t){for(var n=this._data,i=[[]],r=0,e=n.length,a=n[0].length,o=0;a>o;o++){r=0;for(var s=0;e>s;s++)r+=t(n[s][o]);i[0].push(r)}return this._data=i,this},s.prototype.amin=function(t){for(var n,i=this._data,r=[[]],e=Number.POSITIVE_INFINITY,a=i.length,o=i[0].length,s=0;o>s;s++){e=Number.POSITIVE_INFINITY;for(var c=0;a>c;c++)n=t(i[c][s]),e>n&&(e=n);r[0].push(e)}return this._data=r,this},s.prototype.amax=function(t){for(var n,i=this._data,r=[[]],e=Number.NEGATIVE_INFINITY,a=i.length,o=i[0].length,s=0;o>s;s++){e=Number.NEGATIVE_INFINITY;for(var c=0;a>c;c++)n=t(i[c][s]),n>e&&(e=n);r[0].push(e)}return this._data=r,this},s.prototype.size=function(){var t=[];return t.push(this._data.length),t.push(this._data[0].length),t},s.prototype.histc=function(n,i){var r,e,a,o=this,s=21;if(!n)throw new Error("histc()::insufficient input arguments. An data value accessor must be provided.");return this._data=t.range(this._data.length).map(function(t){return o._data[t].map(function(i,r){return n.call(o._data[t],i,r)})}),i.length||(r=this.min(function(t){return t}),e=this.max(function(t){return t}),a=(e-r)/(s-1),i=E.linspace(r,e+1e-16,a)),this._data=t.range(this._data.length).map(function(t){var n;return n=x(o._data[t],i),n=n.map(function(t,r){return[i[r-1],n[r],i[r]]}),n.slice(1,n.length-1)}),this},s.prototype.hist2c=function(n,i,r,e){var a,o,s=this,c=101,u=101;if(!n||!i)throw new Error("hist2c()::insufficient input arguments. Both an x-value and y-value accessor must be supplied.");return this._data=t.range(this._data.length).map(function(t){return s._data[t].map(function(r,e){return[n.call(s._data[t],r,e),i.call(s._data[t],r,e)]})}),r.length||(a=this.min(function(t){return t[0]}),o=this.max(function(t){return t[0]}),binWidth=(o-a)/(c-1),r=E.linspace(a,o+1e-16,binWidth)),e.length||(a=this.min(function(t){return t[1]}),o=this.max(function(t){return t[1]}),binWidth=(o-a)/(u-1),e=E.linspace(a,o+1e-16,binWidth)),this._data=w(this._data,r,e),this._data=this._data.map(function(t,n){return s._data[n].slice(1,s._data[n].length-1)}),this._data=this._data.slice(1,this._data.length-1),this},s.prototype.kde=function(t,n,i){var r=this._data,e=new _;return e.kernel(k.normal(0,1)).x(t).min(n).max(i).points(Math.pow(2,10)),this._data=e.estimator(r,"silverman").eval(r),this},s.prototype.data=function(){return this._data},s.prototype.x=function(t){var n=this,i="function";return arguments.length?(b(t,i,function(i){if(i)throw new Error("x()::invalid input argument.");n._xValue=t}),this):this._xValue},s.prototype.y=function(t){var n=this,i="function";return arguments.length?(b(t,i,function(i){if(i)throw new Error("y()::invalid input argument.");n._yValue=t}),this):this._yValue},s.prototype.z=function(t){var n=this,i="function";return arguments.length?(b(t,i,function(i){if(i)throw new Error("z()::invalid input argument.");n._zValue=t}),this):this._zValue},s.prototype.config=function(){return JSON.parse(JSON.stringify(this._config))},c.prototype.create=function(t){var n,i;return arguments.length||(t=document.createElement("div")),this._parent=t,n=document.createElement("figure"),n.setAttribute("property","figure"),n.className+="figure",t.appendChild(n),i=t.querySelectorAll(".figure"),this._root=i[i.length-1],this},c.prototype.parent=function(){return this._parent},c.prototype.config=function(){return JSON.parse(JSON.stringify(this._config))},c.prototype.children=function(){return this._children},u.prototype.create=function(t){var n,i,r=this._parent._root,e=this._config.position,a=this._config.width,o=this._config.height,s=Date.now();return n=r.append("svg:defs").append("svg:clipPath").attr("id",s),n.append("svg:rect").attr("class","clipPath").attr("width",a).attr("height",o),this._root=r.append("svg:g").attr("property","graph").attr("class","graph").attr("data-graph-type",t?t:"none").attr("data-clipPath",s).attr("transform","translate("+e.left+","+e.top+")"),this._config.background&&(i=this._root.append("svg:rect").attr("class","background").attr("x",0).attr("y",0).attr("width",a).attr("height",o)),this},u.prototype.width=function(t){var i=this,r="number";return arguments.length?(n.isUndefined(t)||n.isNull(t)||b(t,r,function(n){var r;if(n)throw new Error("width()::invalid input argument. ");i._config.width=t,i._config.scales[0].range.max=t,r=i._xScale.range(),i._xScale.range([r[0],t])}),this):this._config.width},u.prototype.height=function(t){var i=this,r="number";return arguments.length?(n.isUndefined(t)||n.isNull(t)||b(t,r,function(n){var r;if(n)throw new Error("height()::invalid input argument. ");i._config.height=t,i._config.scales[1].range.max=t,r=i._yScale.range(),i._yScale.range([t,r[1]])}),this):this._config.height},u.prototype.xMin=function(t){var i=this,r=this._config.scales[0].domain,e="number";return arguments.length?(n.isUndefined(t)||n.isNull(t)||b(t,e,function(n){var e;if(n)throw new Error("xMin()::invalid input argument. ");r.min=t,e=i._xScale.domain(),i._xScale.domain([t,e[1]])}),this):r.min},u.prototype.xMax=function(t){var i=this,r=this._config.scales[0].domain,e="number";return arguments.length?(n.isUndefined(t)||n.isNull(t)||b(t,e,function(n){var e;if(n)throw new Error("xMax()::invalid input argument. ");r.max=t,e=i._xScale.domain(),i._xScale.domain([e[0],t])}),this):r.max},u.prototype.yMin=function(t){var i=this,r=this._config.scales[1].domain,e="number";return arguments.length?(n.isUndefined(t)||n.isNull(t)||b(t,e,function(n){var e;if(n)throw new Error("yMin()::invalid input argument. ");r.min=t,e=i._yScale.domain(),i._yScale.domain([t,e[1]])}),this):r.min},u.prototype.yMax=function(t){var i=this,r=this._config.scales[1].domain,e="number";return arguments.length?(n.isUndefined(t)||n.isNull(t)||b(t,e,function(n){var e;if(n)throw new Error("yMax()::invalid input argument. ");r.max=t,e=i._yScale.domain(),i._yScale.domain([e[0],t])}),this):r.max},u.prototype.zMin=function(t){var i=this,r=this._config.scales[2].domain,e="number";return arguments.length?(n.isUndefined(t)||n.isNull(t)||b(t,e,function(n){var e;if(n)throw new Error("zMin()::invalid input argument. ");r.min=t,e=i._zScale.domain(),i._zScale.domain([t,e[1]])}),this):r.min},u.prototype.zMax=function(t){var i=this,r=this._config.scales[2].domain,e="number";return arguments.length?(n.isUndefined(t)||n.isNull(t)||b(t,e,function(n){var e;if(n)throw new Error("zMax()::invalid input argument. ");r.max=t,e=i._zScale.domain(),i._zScale.domain([e[0],t])}),this):r.max},u.prototype.xDomain=function(t){var n=this,i=this._config.scales[0].domain,r="array";return arguments.length?(b(t,r,function(r){if(r)throw new Error("xDomain()::invalid input argument. ");i.min=t[0],i.max=t[1],n._xScale.domain(t)}),this):[i.min,i.max]},u.prototype.yDomain=function(t){var n=this,i=this._config.scales[1].domain,r="array";return arguments.length?(b(t,r,function(r){if(r)throw new Error("yDomain()::invalid input argument. ");i.min=t[0],i.max=t[1],n._yScale.domain(t)}),this):[i.min,i.max]},u.prototype.zDomain=function(t){var n=this,i=this._config.scales[2].domain,r="array";return arguments.length?(b(t,r,function(r){if(r)throw new Error("zDomain()::invalid input argument. ");i.min=t[0],i.max=t[1],n._zScale.domain(t)}),this):[i.min,i.max]},u.prototype.xRange=function(t){var n=this,i=this._config.scales[0].range,r="array";return arguments.length?(b(t,r,function(r){if(r)throw new Error("xRange()::invalid input argument. ");i.min=t[0],i.max=t[1],n._xScale.range(t)}),this):[i.min,i.max]},u.prototype.yRange=function(t){var n=this,i=this._config.scales[1].range,r="array";return arguments.length?(b(t,r,function(r){if(r)throw new Error("yRange()::invalid input argument. ");
i.min=t[1],i.max=t[0],n._yScale.range(t)}),this):[i.max,i.min]},u.prototype.zRange=function(t){var n=this,i=this._config.scales[2].range,r="array";return arguments.length?(b(t,r,function(r){if(r)throw new Error("zRange()::invalid input argument. ");i.min=t[0],i.max=t[1],n._zScale.range(t)}),this):[i.min,i.max]},u.prototype.xScale=function(t,n){var i=this;return arguments.length&&t?(this.scale(t,n,function(n,r){if(n)throw new Error("xScale()::invalid input arguments. ");i._config.scales[0].type=t,i._xScale=r.domain([i._config.scales[0].domain.min,i._config.scales[0].domain.max]).range([i._config.scales[0].range.min,i._config.scales[0].range.max])}),this):this._config.scales[0].type},u.prototype.yScale=function(t,n){var i=this;return arguments.length&&t?(this.scale(t,n,function(n,r){if(n)throw new Error("yScale()::invalid input arguments. ");i._config.scales[1].type=t,i._yScale=r.domain([i._config.scales[1].domain.min,i._config.scales[1].domain.max]).range([i._config.scales[1].range.max,i._config.scales[1].range.min])}),this):this._config.scales[1].type},u.prototype.zScale=function(t,n){var i=this;return arguments.length&&t?(this.scale(t,n,function(n,r){if(n)throw new Error("zScale()::invalid input arguments. ");i._config.scales[2].type=t,i._zScale=r.domain([i._config.scales[2].domain.min,i._config.scales[2].domain.max]).range([i._config.scales[2].range.min,i._config.scales[2].range.max])}),this):this._config.scales[2].type},u.prototype.scale=function(n,i,r){function e(){return t.scale.linear()}function a(){return t.scale.log().base(i)}function o(){return t.scale.pow().exponent(i)}function s(){return t.scale.category10()}function c(){return t.scale.category20()}function u(){return t.scale.category20b()}function h(){return t.scale.category20c()}var l="string|matches[linear,log,pow,category10,category20,category20b,category20c]",f={linear:e,log:a,pow:o,category10:s,category20:c,category20b:u,category20c:h};return b(n,l,function(t){return t?void r(t):void r(null,f[n]())}),this},u.prototype.background=function(t){var n=this;return arguments.length?(function(i){if(i)throw new Error("background()::invalid input argument.");n._config.background=t}(),this):this._config.background},u.prototype.position=function(t){var n=this,i="object|has_properties[left,top]";return arguments.length?(b(t,i,function(i){var r="number";if(i)throw new Error("position()::invalid input argument.");for(var e in t)if(t.hasOwnProperty(e)&&(i=b(t[e],r),i.length))throw new Error("position()::invalid input argument.");n._config.position=t}),this):this._config.position},u.prototype.left=function(t){var n=this._config.position,i="number";return arguments.length?(b(t,i,function(i){if(i)throw new Error("left()::invalid input argument.");n.left=t}),this):n.left},u.prototype.top=function(t){var n=this._config.position,i="number";return arguments.length?(b(t,i,function(i){if(i)throw new Error("top()::invalid input argument.");n.top=t}),this):n.top},u.prototype.data=function(t){if(!arguments.length)return this._data;if(!(t instanceof s))throw new Error("data()::invalid input argument. Input argument must be an instance of Data.");return this._data=t._data,this},u.prototype.parent=function(){return this._parent},u.prototype.config=function(){return JSON.parse(JSON.stringify(this._config))},u.prototype.children=function(){return this._children},h.prototype.create=function(){var t,n=this._parent._root,i=this._config.labels;return this._root=n.append("svg:g").attr("property","marks").attr("class","marks").attr("clip-path","url(#"+n.attr("data-clipPath")+")"),t=this._root.selectAll(".area").data(this._data).enter().append("svg:path").attr("property","area").attr("class","area").attr("data-label",function(t,n){return i[n]}).attr("d",this._path),this},h.prototype.path=function(){return t.svg.area()},h.prototype.interpolation=function(t){var n=this;return rules="string|matches[linear,linear-closed,step,step-before,step-after,basis,basis-open,basis-closed,bundle,cardinal,cardinal-open,cardinal-closed,monotone]",arguments.length?(b(t,rules,function(i){if(i)throw new Error("interpolation()::invalid input argument.");n._config.interpolation.mode=t,n._path.interpolate(t)}),this):this._config.interpolation.mode},h.prototype.tension=function(t){var n=this,i="interval[0,1]";return arguments.length?(b(t,i,function(i){if(i)throw new Error("tension()::invalid input argument.");n._config.interpolation.tension=t,n._path.tension(t)}),this):this._config.interpolation.tension},h.prototype.labels=function(t){var n=this,i="array";return arguments.length?(b(t,i,function(i){if(i)throw new Error("labels()::invalid input argument.");n._config.labels=t}),this):this._config.labels},h.prototype.parent=function(){return this._parent},h.prototype.config=function(){return JSON.parse(JSON.stringify(this._config))},h.prototype.children=function(){return this._children},l.prototype.create=function(){var t,n=this._parent._root,i=this._config.labels;return this._root=n.selectAll(".marks").data(this._data).enter().append("svg:g").attr("property","marks").attr("class","marks").attr("data-label",function(t,n){return i[n]}).attr("clip-path","url(#"+n.attr("data-clipPath")+")"),t=this._root.selectAll(".column").data(function(t){return t}).enter().append("svg:rect").attr("property","column").attr("class","column").attr("x",this._transforms.x).attr("y",this._transforms.y).attr("width",this._transforms.width).attr("height",this._transforms.height),t.append("svg:title").attr("class","tooltip").text(function(t){return Math.round(t[1])}),this},l.prototype.padding=function(t){var n=this,i="number";return arguments.length?(b(t,i,function(i){if(i)throw new Error("padding()::invalid input argument.");n._config.padding=t}),this):this._config.padding},l.prototype.labels=function(t){var n=this,i="array";return arguments.length?(b(t,i,function(i){if(i)throw new Error("labels()::invalid input argument.");n._config.labels=t}),this):this._config.labels},l.prototype.parent=function(){return this._parent},l.prototype.config=function(){return JSON.parse(JSON.stringify(this._config))},l.prototype.children=function(){return this._children},f.prototype.create=function(){var t,n=this._parent._root,i=this._config.labels;return this._root=n.append("svg:g").attr("property","marks").attr("class","marks").attr("clip-path","url(#"+n.attr("data-clipPath")+")"),t=this._root.selectAll(".line").data(this._data).enter().append("svg:path").attr("property","line").attr("class","line").attr("data-label",function(t,n){return i[n]}).attr("d",this._path),this},f.prototype.path=function(){return t.svg.line()},f.prototype.interpolation=function(t){var n=this;return rules="string|matches[linear,linear-closed,step,step-before,step-after,basis,basis-open,basis-closed,bundle,cardinal,cardinal-open,cardinal-closed,monotone]",arguments.length?(b(t,rules,function(i){if(i)throw new Error("interpolation()::invalid input argument.");n._config.interpolation.mode=t,n._path.interpolate(t)}),this):this._config.interpolation.mode},f.prototype.tension=function(t){var n=this,i="interval[0,1]";return arguments.length?(b(t,i,function(i){if(i)throw new Error("tension()::invalid input argument.");n._config.interpolation.tension=t,n._path.tension(t)}),this):this._config.interpolation.tension},f.prototype.labels=function(t){var n=this,i="array";return arguments.length?(b(t,i,function(i){if(i)throw new Error("labels()::invalid input argument.");n._config.labels=t}),this):this._config.labels},f.prototype.parent=function(){return this._parent},f.prototype.config=function(){return JSON.parse(JSON.stringify(this._config))},f.prototype.children=function(){return this._children},p.prototype.create=function(){var t,n,i=this._parent._root,r=this._parent._config.scales[1].range.max,e=this._config.labels,a=this._config.size;return this._root=i.append("svg:g").attr("property","marks").attr("class","marks").attr("clip-path","url(#"+i.attr("data-clipPath")+")"),t=this._root.selectAll(".rug").data(this._data).enter().append("svg:g").attr("property","rug").attr("class","rug").attr("data-label",function(t,n){return e[n]}).attr("transform","translate(0,"+(r-a)+")"),n=t.selectAll(".line").data(function(t){return t.map(function(t){return[[t,0],[t,a]]})}).enter().append("svg:path").attr("property","line").attr("class","line").attr("d",this._path),this},p.prototype.path=function(){return t.svg.line()},p.prototype.size=function(t){var n=this,i="number";return arguments.length?(b(t,i,function(i){if(i)throw new Error("size()::invalid input argument.");n._config.size=t}),this):this._config.size},p.prototype.labels=function(t){var n=this,i="array";return arguments.length?(b(t,i,function(i){if(i)throw new Error("labels()::invalid input argument.");n._config.labels=t}),this):this._config.labels},p.prototype.parent=function(){return this._parent},p.prototype.config=function(){return JSON.parse(JSON.stringify(this._config))},p.prototype.children=function(){return this._children},g.prototype.create=function(){var t,n,i=this,r=this._parent._root,e=this._config.labels;return this._root=r.append("svg:g").attr("property","marks").attr("class","marks").attr("clip-path","url(#"+r.attr("data-clipPath")+")").attr("transform","translate( 0, 0)"),t=this._root.selectAll(".histogram").data(this._data).enter().append("svg:g").attr("property","histogram").attr("class","histogram").attr("data-label",function(t,n){return e[n]}).attr("transform",function(t,n){return"translate( 0,"+i._transforms.y(t,n)+" )"}),n=t.selectAll(".bin").data(function(t){return t}).enter().append("svg:rect").attr("property","bin").attr("class","bin").attr("x",this._transforms.x).attr("y",0).attr("width",this._transforms.width).attr("height",this._transforms.height).style("fill",this._transforms.color),this},g.prototype.labels=function(t){var n=this,i="array";return arguments.length?(b(t,i,function(i){if(i)throw new Error("labels()::invalid input argument.");n._config.labels=t}),this):this._config.labels},g.prototype.parent=function(){return this._parent},g.prototype.config=function(){return JSON.parse(JSON.stringify(this._config))},g.prototype.children=function(){return this._children},m.prototype.padding=function(t){var n=this,i="object|has_properties[left,top]";return arguments.length?(b(t,i,function(i){var r="number";if(i)throw new Error("padding()::invalid input argument.");for(var e in t)if(t.hasOwnProperty(e)&&(i=b(t[e],r),i.length))throw new Error("padding()::invalid input argument.");n._config.padding=t}),this):this._config.padding},m.prototype.paddingLeft=function(t){var n=this._config.padding,i="number";return arguments.length?(b(t,i,function(i){if(i)throw new Error("paddingLeft()::invalid input argument.");n.left=t}),this):n.left},m.prototype.paddingTop=function(t){var n=this._config.padding,i="number";return arguments.length?(b(t,i,function(i){if(i)throw new Error("paddingTop()::invalid input argument.");n.top=t}),this):n.top},m.prototype.gutter=function(t){var n=this,i="number";return arguments.length?(b(t,i,function(i){if(i)throw new Error("gutter()::invalid input argument.");n._config.gutter=t}),this):this._config.gutter},m.prototype.width=function(t){var i=this,r="number";return arguments.length?(n.isUndefined(t)||n.isNull(t)||b(t,r,function(n){if(n)throw new Error("width()::invalid input argument. ");i._config.width=t,i._config.scales[0].range.max=t}),this):this._config.width},m.prototype.height=function(t){var i=this,r="number";return arguments.length?(n.isUndefined(t)||n.isNull(t)||b(t,r,function(n){if(n)throw new Error("height()::invalid input argument. ");i._config.height=t}),this):this._config.height},m.prototype.xMin=function(t){var i=this._config.scales[0].domain,r="number";return arguments.length?(n.isUndefined(t)||n.isNull(t)||b(t,r,function(n){if(n)throw new Error("xMin()::invalid input argument. ");i.min=t}),this):i.min},m.prototype.xMax=function(t){var i=this._config.scales[0].domain,r="number";return arguments.length?(n.isUndefined(t)||n.isNull(t)||b(t,r,function(n){if(n)throw new Error("xMax()::invalid input argument. ");i.max=t}),this):i.max},m.prototype.yMin=function(t){var i=this._config.scales[1].domain,r="number";return arguments.length?(n.isUndefined(t)||n.isNull(t)||b(t,r,function(n){if(n)throw new Error("yMin()::invalid input argument. ");i.min=t}),this):i.min},m.prototype.yMax=function(t){var i=this._config.scales[1].domain,r="number";return arguments.length?(n.isUndefined(t)||n.isNull(t)||b(t,r,function(n){if(n)throw new Error("yMax()::invalid input argument. ");i.max=t}),this):i.max},m.prototype.xDomain=function(t){var n=this._config.scales[0].domain,i="array";return arguments.length?(b(value,i,function(i){if(i)throw new Error("xDomain()::invalid input argument. ");n.min=t[0],n.max=t[1]}),this):[n.min,n.max]},m.prototype.yDomain=function(t){var n=this._config.scales[1].domain,i="array";return arguments.length?(b(value,i,function(i){if(i)throw new Error("yDomain()::invalid input argument. ");n.min=t[0],n.max=t[1]}),this):[n.min,n.max]},m.prototype.xRange=function(t){var n=this._config.scales[0].range,i="array";return arguments.length?(b(value,i,function(i){if(i)throw new Error("xRange()::invalid input argument. ");n.min=t[0],n.max=t[1]}),this):[n.min,n.max]},m.prototype.yRange=function(t){var n=this._config.scales[1].range,i="array";return arguments.length?(b(value,i,function(i){if(i)throw new Error("yRange()::invalid input argument. ");n.min=t[1],n.max=t[0]}),this):[n.max,n.min]},m.prototype.xScale=function(t,n){var i=this;return arguments.length&&t?(this.scale(t,n,function(n,r){if(n)throw new Error("xScale()::invalid input arguments. ");i._config.scales[0].type=t,i._xScale=r.domain([i._config.scales[0].domain.min,i._config.scales[0].domain.max]).range([i._config.scales[0].range.min,i._config.scales[0].range.max])}),this):this._config.scales[0].type},m.prototype.yScale=function(t,n){var i=this;return arguments.length&&t?(this.scale(t,n,function(n,r){if(n)throw new Error("yScale()::invalid input arguments. ");i._config.scales[1].type=t,i._yScale=r.domain([i._config.scales[1].domain.min,i._config.scales[1].domain.max]).range([i._config.scales[1].range.max,i._config.scales[1].range.min])}),this):this._config.scales[1].type},m.prototype.scale=function(t,n,i){var r=this,e="string|matches[linear,log,pow,category10,category20,category20b,category20c]";return b(t,e,function(n){return n?void i(n):void i(null,r._scales[t]())}),this},m.prototype._scales={},m.prototype._scales.linear=function(){return t.scale.linear()},m.prototype._scales.log=function(){return t.scale.log().base(value)},m.prototype._scales.pow=function(){return t.scale.pow().exponent(value)},m.prototype._scales.category10=function(){return t.scale.category10()},m.prototype._scales.category20=function(){return t.scale.category20()},m.prototype._scales.category20b=function(){return t.scale.category20b()},m.prototype._scales.category20c=function(){return t.scale.category20c()},m.prototype.background=function(t){var n=this;return arguments.length?(function(i){if(i)throw new Error("background()::invalid input argument.");n._config.background=t}(),this):this._config.background},m.prototype.position=function(t){var n=this,i="object|has_properties[left,top]";return arguments.length?(b(t,i,function(i){var r="number";if(i)throw new Error("position()::invalid input argument.");for(var e in t)if(t.hasOwnProperty(e)&&(i=b(t[e],r),i.length))throw new Error("position()::invalid input argument.");n._config.position=t}),this):this._config.position},m.prototype.left=function(t){var n=this._config.position,i="number";return arguments.length?(b(t,i,function(i){if(i)throw new Error("left()::invalid input argument.");n.left=t}),this):n.left},m.prototype.top=function(t){var n=this._config.position,i="number";return arguments.length?(b(t,i,function(i){if(i)throw new Error("top()::invalid input argument.");n.top=t}),this):n.top},m.prototype.data=function(t){var n=this,i="array";return arguments.length?(b(t,i,function(i){if(i)throw new Error("data()::invalid input argument.");for(var r=0;r<t.length;r++)if(!(t[r]instanceof s))throw new Error("data()::invalid input argument. Each input argument member must be an instance of Data.");n._data=t}),this):this._data},m.prototype.xLabel=function(t){var n=this,i="string";return arguments.length?(b(t,i,function(i){if(i)throw new Error("xLabel()::invalid input argument.");n._config.axes[0].label=t}),this):this._config.axes[0].label},m.prototype.yLabel=function(t){var n=this,i="string";return arguments.length?(b(t,i,function(i){if(i)throw new Error("yLabel()::invalid input argument.");n._config.axes[1].label=t}),this):this._config.axes[1].label},m.prototype.xNumTicks=function(t){var i=this,r="number";return arguments.length?(n.isUndefined(t)||n.isNull(t)?set():b(t,r,function(n){if(n)throw new Error("xNumTicks()::invalid input argument.");i._config.axes[0].ticks.num=t}),this):this._config.axes[0].ticks.num},m.prototype.yNumTicks=function(t){var i=this,r="number";return arguments.length?(n.isUndefined(t)||n.isNull(t)?set():b(t,r,function(n){if(n)throw new Error("yNumTicks()::invalid input argument.");i._config.axes[1].ticks.num=t}),this):this._config.axes[1].ticks.num},m.prototype.xTickPadding=function(t){var n=this,i="number";return arguments.length?(b(t,i,function(i){if(i)throw new Error("xTickPadding()::invalid input argument.");n._config.axes[0].ticks.padding=t}),this):this._config.axes[0].ticks.padding},m.prototype.yTickPadding=function(t){var n=this,i="number";return arguments.length?(b(t,i,function(i){if(i)throw new Error("yTickPadding()::invalid input argument.");n._config.axes[1].ticks.padding=t}),this):this._config.axes[1].ticks.padding},m.prototype.xTickRotation=function(t){var n=this,i="number";return arguments.length?(b(t,i,function(i){if(i)throw new Error("xTickRotation()::invalid input argument.");n._config.axes[0].ticks.rotation=t}),this):this._config.axes[0].ticks.rotation},m.prototype.yTickRotation=function(t){var n=this,i="number";return arguments.length?(b(t,i,function(i){if(i)throw new Error("yTickRotation()::invalid input argument.");n._config.axes[1].ticks.rotation=t}),this):this._config.axes[1].ticks.rotation},m.prototype.xInnerTickSize=function(t){var n=this,i="number";return arguments.length?(b(t,i,function(i){if(i)throw new Error("xInnerTickSize()::invalid input argument.");n._config.axes[0].ticks.innerSize=t}),this):this._config.axes[0].ticks.innerSize},m.prototype.yInnerTickSize=function(t){var n=this,i="number";return arguments.length?(b(t,i,function(i){if(i)throw new Error("yInnerTickSize()::invalid input argument.");n._config.axes[1].ticks.innerSize=t}),this):this._config.axes[1].ticks.innerSize},m.prototype.xOuterTickSize=function(t){var n=this,i="number";return arguments.length?(b(t,i,function(i){if(i)throw new Error("xOuterTickSize()::invalid input argument.");n._config.axes[0].ticks.outerSize=t}),this):this._config.axes[0].ticks.outerSize},m.prototype.yOuterTickSize=function(t){var n=this,i="number";return arguments.length?(b(t,i,function(i){if(i)throw new Error("yOuterTickSize()::invalid input argument.");n._config.axes[1].ticks.outerSize=t}),this):this._config.axes[1].ticks.outerSize},m.prototype.xTickFormat=function(t,n){var i,r=this;return arguments.length?(i=n?"string|matches[%Y,%B,%b,%a,%d,%I,%p,%M,%S,%L]":"string",b(t,i,function(n){if(n)throw new Error("xTickFormat()::invalid input arguments.");r._config.axes[0].ticks.format=t}),this):this._config.axes[0].ticks.format},m.prototype.yTickFormat=function(t,n){var i,r=this;return arguments.length?(i=n?"string|matches[%Y,%B,%b,%a,%d,%I,%p,%M,%S,%L]":"string",b(t,i,function(n){if(n)throw new Error("yTickFormat()::invalid input arguments.");r._config.axes[1].ticks.format=t}),this):this._config.axes[1].ticks.format},m.prototype.xTickDisplay=function(t){var n=this;return arguments.length?(function(i){if(i)throw new Error("xTickDisplay()::invalid input argument.");n._config.axes[0].ticks.display=t}(),this):this._config.axes[0].ticks.display},m.prototype.yTickDisplay=function(t){var n=this;return arguments.length?(function(i){if(i)throw new Error("yTickDisplay()::invalid input argument.");n._config.axes[1].ticks.display=t}(),this):this._config.axes[1].ticks.display},m.prototype.xTickDirection=function(t){var n=this,i="matches[in,out,both]";return arguments.length?(b(t,i,function(i){if(i)throw new Error("xTickDirection()::invalid input argument.");n._config.axes[0].ticks.direction=t}),this):this._config.axes[0].ticks.direction},m.prototype.yTickDirection=function(t){var n=this,i="matches[in,out,both]";return arguments.length?(b(t,i,function(i){if(i)throw new Error("yTickDirection()::invalid input argument.");n._config.axes[1].ticks.direction=t}),this):this._config.axes[1].ticks.direction},m.prototype.xAxisOrient=function(t){var n=this,i="matches[bottom,top]";return arguments.length?(b(t,i,function(i){if(i)throw new Error("xAxisOrient()::invalid input argument.");n._config.axes[0].orient=t}),this):this._config.axes[0].orient},m.prototype.yAxisOrient=function(t){var n=this,i="matches[left,right]";return arguments.length?(b(t,i,function(i){if(i)throw new Error("yAxisOrient()::invalid input argument.");n._config.axes[1].orient=t}),this):this._config.axes[1].orient},m.prototype.xAxisDisplay=function(t){var n=this;return arguments.length?(function(i){if(i)throw new Error("xAxisDisplay()::invalid input argument.");n._config.axes[0].display=t}(),this):this._config.axes[0].display},m.prototype.yAxisDisplay=function(t){var n=this;return arguments.length?(function(i){if(i)throw new Error("yAxisDisplay()::invalid input argument.");n._config.axes[1].display=t}(),this):this._config.axes[1].display},m.prototype.parent=function(){return this._parent},m.prototype.config=function(){return JSON.parse(JSON.stringify(this._config))},m.prototype.children=function(){return this._children},d.prototype=Object.create(m.prototype),d.prototype.constructor=d,d.prototype.create=function(){var t,n,i,r,e,a,o,s,c,u,h=this._config,l=this._parent._root,f=h.position,p=h.width,g=h.height,m=h.padding,d=h.gutter,_=h.rows,y=h.cols,v=this._data.length;if(v>_*y)throw new Error("create()::data number exceeds grid size. Total: "+v+"; Grid: "+_+"x"+y+".");this._root=l.append("svg:g").attr("property","panel").attr("class","panel").attr("transform","translate("+f.left+","+f.top+")"),t=Math.floor((p-d-m.left*(y-1))/y),n=Math.floor((g-54-m.top*(_-1))/_),h.scales[0].range.max=t,h.scales[1].range.max=n;for(var w=0;v>w;w++)o=Math.floor(w/y),s=w%y,c=!1,o===_-1&&(c=!0),u=!1,0===s&&(u=!0),r=(n+m.top)*o,i=(t+m.left)*s,e=this._graph(t,n,i,r,this._data[w]),a=this._axes(e,c,u);return h.headers.length&&this._headers(t),h.labels.length&&this._labels(n),this},d.prototype._graph=function(t,n,i,r,e){var a=new u(this),o=this._config;return a.width(t).height(n).position({left:i,top:r}).xMin(o.scales[0].domain.min).xMax(o.scales[0].domain.max).yMin(o.scales[1].domain.min).yMax(o.scales[1].domain.max).xRange([o.scales[0].range.min,o.scales[0].range.max]).yRange([o.scales[1].range.max,o.scales[1].range.min]).xScale(o.scales[0].type).yScale(o.scales[1].type).background(o.background).data(e),a.create()},d.prototype._axes=function(t,n,i){var r=new a(t),e=this._config;return r.yLabel(e.axes[1].label).yTickFormat(e.axes[1].ticks.format).xNumTicks(e.axes[0].ticks.num).yNumTicks(e.axes[1].ticks.num).xTickPadding(e.axes[0].ticks.padding).yTickPadding(e.axes[1].ticks.padding).xTickRotation(e.axes[0].ticks.rotation).yTickRotation(e.axes[1].ticks.rotation).xInnerTickSize(e.axes[0].ticks.innerSize).yInnerTickSize(e.axes[1].ticks.innerSize).xOuterTickSize(e.axes[0].ticks.outerSize).yOuterTickSize(e.axes[1].ticks.outerSize).xTickDirection(e.axes[0].ticks.direction).yTickDirection(e.axes[1].ticks.direction).xTickDisplay(n).yTickDisplay(e.axes[1].ticks.display).xAxisOrient(e.axes[0].orient).yAxisOrient(e.axes[1].orient).xAxisDisplay(e.axes[0].display),n?r.xLabel(e.axes[0].label).xTickFormat(e.axes[0].ticks.format):r.xLabel("").xTickFormat(""),r.yAxisDisplay(i?e.axes[1].display:!1),r.create()},d.prototype._headers=function(t){var n,r,e=this._config,a=e.cols,o=e.headers,s=e.padding.left;a!==o.length&&(a=Math.min(a,o.length)),n=new i(this),n.create();for(var c=0;a>c;c++)r=n.text().width(t).height(100).top(-35).left((t+s)*c),r.create('<span class="col-header">'+o[c]+"</span>");return this},d.prototype._labels=function(t){var n,r,e=this._config,a=e.rows,o=e.labels,s=e.width,c=e.padding.top,u=e.gutter;a!==o.length&&(a=Math.min(a,o.length)),n=new i(this),n.create();for(var h=0;a>h;h++)r=n.text().width(u-20).height(100).top(t*(h+.5)+c*h).left(s-u+20),r.create('<span class="row-label">'+o[h]+"</span>");return this},d.prototype.rows=function(t){var n=this,i="number";return arguments.length?(b(t,i,function(i){if(i)throw new Error("rows()::invalid input argument.");n._config.rows=t}),this):this._config.rows},d.prototype.cols=function(t){var n=this,i="number";return arguments.length?(b(t,i,function(i){if(i)throw new Error("cols()::invalid input argument.");n._config.cols=t}),this):this._config.cols},d.prototype.headers=function(t){var n=this,i="array";return arguments.length?(b(t,i,function(i){if(i)throw new Error("headers()::invalid input argument.");n._config.headers=t}),this):this._config.headers},d.prototype.labels=function(t){var n=this,i="array";return arguments.length?(b(t,i,function(i){if(i)throw new Error("labels()::invalid input argument.");n._config.labels=t}),this):this._config.labels};var w;!function(){"use strict";function t(t,n){var i,r=0,e=t.length;if(n<t[r])return-1;if(n>t[e-1])return e-1;for(;e>=r;)i=r+e>>1,n>t[i]?r=i+1:e=n===t[i]?-2:i-1;return n<t[i]?i-1:i}function n(n,i,r){for(var e,a,o=[],s=-1;s<i.length;s++){o[s+1]=[];for(var c=-1;c<r.length;c++)o[s+1][c+1]=0}for(var u=0;u<n.length;u++)for(var h=0;h<n[u].length;h++)e=t(i,n[u][h][0]),a=t(r,n[u][h][1]),o[e+1][a+1]+=1;return o}w=n}();var x;!function(){"use strict";function t(t,n){var i,r=0,e=t.length;if(n<t[r])return-1;if(n>t[e-1])return e-1;for(;e>=r;)i=r+e>>1,n>t[i]?r=i+1:e=n===t[i]?-2:i-1;return n<t[i]?i-1:i}function n(n,i){for(var r,e=[],a=-1;a<i.length;a++)e[a+1]=0;for(var o=0;o<n.length;o++)r=t(i,n[o]),e[r+1]+=1;return e}x=n}(),_.prototype.kernel=function(t){var n=this,i="function";return arguments.length?(b(t,i,function(i){if(i)throw new Error("kernel()::invalid input argument.");n._kernel=t}),this):this._kernel},_.prototype.bandwidth=function(t){var n=this,i="array";return arguments.length?(b(t,i,function(i){if(i)throw new Error("bandwidth()::invalid input argument.");n._config.bandwidth=t}),this):this._config.bandwidth},_.prototype.estimator=function(t,n){var i=this._xValue,r={silverman:y};if(2!==arguments.length)throw new Error("estimator()::incorrect number of input arguments. Provide data and an estimator method.");if(n=n.toLowerCase(),!r.hasOwnProperty(n))throw new Error("estimator()::unrecognized estimator method: "+n);return t=t.map(function(t){return t.map(function(t){return i(t)})}),this._config.bandwidth=t.map(function(t){return r[n](t)}),this},_.prototype.x=function(t){var n=this,i="function";return arguments.length?(b(t,i,function(i){if(i)throw new Error("x()::invalid input argument.");n._xValue=t}),this):this._xValue},_.prototype.min=function(t){var n=this._config.domain,i="number";return arguments.length?(b(t,i,function(i){if(i)throw new Error("min()::invalid input argument. ");n.min=t}),this):n.min},_.prototype.max=function(t){var n=this._config.domain,i="number";return arguments.length?(b(t,i,function(i){if(i)throw new Error("max()::invalid input argument. ");n.max=t}),this):n.max},_.prototype.domain=function(t){var n=this._config.domain,i="array";return arguments.length?(b(t,i,function(i){if(i)throw new Error("domain()::invalid input argument. ");n.min=t[0],n.max=t[1]}),this):[n.min,n.max]},_.prototype.points=function(t){var n,i=this._config.domain,r="number";return arguments.length?(b(t,r,function(r){if(r)throw new Error("pts()::invalid input argument. ");n=Math.ceil(Math.log(t)/Math.log(2)),i.pts=Math.pow(2,n)}),this):i.pts},_.prototype.eval=function(t){var n,i,r,e=[],a=[],o=this._xValue,s=this._kernel,c=this._config.bandwidth,u=this._config.domain.pts,h=this._config.domain.min,l=this._config.domain.max;if(r=(l-h)/(u-1),i=E.linspace(h,l,r),t.length!==c.length)for(var f=0;f<t.length;f++)c.push(c[0]);for(var p=0;p<t.length;p++){a=new Array(u);for(var g=0;u>g;g++){a[g]=[i[g],0];for(var m=0;m<t[p].length;m++)n=(o(t[p][m])-i[g])/c[p],a[g][1]+=s(n);a[g][1]/=c[p]*u}e.push(a)}return e},_.prototype.config=function(){return JSON.parse(JSON.stringify(this._config))};var k={version:"0.0.0"};k.normal=function(t,n){var i,r=Math.PI,e=Math.sqrt,a=Math.exp,o=1/(n*e(2*r)),s=-1/(2*n*n);return function(n){return i=n-t,o*a(s*i*i)}};var b;!function(t){"use strict";var n,i;n={isObject:function(n){var i;return t.isPlainObject(n)?void 0:(i={rule:"isObject",message:"ERROR:provided value is not an object."},[i])},hasProperties:function(t,n){var i=[];n=n.split(",");for(var r=0;r<n.length;r++)t.hasOwnProperty(n[r])||i.push({rule:"hasProperties",message:"ERROR:value does not have the following property: "+n[r]});return i},matches:function(t,n){var i;return n=n.split(","),-1===n.indexOf(t)?(i={rule:"matches",message:"ERROR:provided value does not match an allowed value: "+n},[i]):void 0},isFunction:function(n){var i;return t.isFunction(n)?void 0:(i={rule:"isFunction",message:"ERROR:provided value is not a function."},[i])},isString:function(n){var i;return t.isString(n)?void 0:(i={rule:"isString",message:"ERROR:provided value is not a string."},[i])},isArray:function(n){var i;return t.isArray(n)?void 0:(i={rule:"isArray",message:"ERROR:provided value is not an array."},[i])},greater_than:function(t,n){var i;return t<=parseFloat(n)?(i={rule:"greater_than",message:"ERROR:provided value ["+t+"] is not greater than "+parseFloat(n)},[i]):void 0},less_than:function(t,n){var i;return t>=parseFloat(n)?(i={rule:"less_than",message:"ERROR:provided value ["+t+"] is not less than "+parseFloat(n)},[i]):void 0},interval:function(t,n){var i;return n=n.split(","),t<parseFloat(n[0])?(i={rule:"interval",message:"ERROR:provided value exceeds the lower bound: "+n[0]},[i]):t>parseFloat(n[1])?(i={rule:"interval",message:"ERROR:provided value exceeds the upper bound: "+n[1]},[i]):void 0},isNumber:function(n){var i;return!t.isNumber(n)||t.isNaN(n)?(i={rule:"isNumber",message:"ERROR:provided value ["+n+"] is not a number."},[i]):void 0},isInteger:function(t){var n;return t!==+t&&t!==(0|t)?(n={rule:"isInteger",message:"ERROR:provided value ["+t+"] is not an integer."},[n]):void 0},isNull:function(n){var i;return t.isNull(n)?void 0:(i={rule:"isNull",message:"ERROR:provided value["+n+"] is not null."},[i])},isEmpty:function(n){var i;try{if(n.length)return i={rule:"isEmpty",message:"ERROR:provided value["+n+"] is not empty."},[i]}catch(r){if(t.isPlainObject(n))for(var e in n)if(n.hasOwnProperty(e))return i={rule:"isEmpty",message:"ERROR:provided value["+n+"] is not empty."},[i];return i={rule:"isEmpty",message:"ERROR:input data type is not compatible with this rule."},[i]}}},n.rule={object:n.isObject,has_properties:n.hasProperties,"function":n.isFunction,string:n.isString,array:n.isArray,integer:n.isInteger,number:n.isNumber,greater_than:n.greater_than,less_than:n.less_than,matches:n.matches,interval:n.interval,"null":n.isNull,empty:n.isEmpty},i=function(t,i,r){var e,a,o,s,c=[],u=[];c=i.split("|");for(var h=0;h<c.length;h++)if(o=null,e=c[h],a=c[h].indexOf("["),-1!==a&&(e=c[h].substr(0,a)),e!==c[h]&&(o=c[h].match(/\[([^\]]+)\]/)[1]),n.rule.hasOwnProperty(e)){if(s=n.rule[e](t,o),s&&s.length)for(var l=0;l<s.length;l++)u.push(s[l])}else u.push({rule:"unknown rule: "+c[h],message:"ERROR:unknown rule. Validation could not be performed."});return r?u.length?void r(u):void r(null):u},b=i}(n);var E={version:"0.0.0"};E.mean=function(t){for(var n=0,i=0;i<t.length;i++)n+=t[i];return n/t.length},E.variance=function(t){for(var n,i,r=0,e=0,a=t.length,o=0;a>o;o++)r+=t[o],e+=t[o]*t[o];return n=e/(a-1),i=r*r/(a*(a-1)),n-i
},E.stdev=function(t){for(var n,i,r=0,e=0,a=t.length,o=0;a>o;o++)r+=t[o],e+=t[o]*t[o];return n=e/(a-1),i=r*r/(a*(a-1)),Math.sqrt(n-i)},E.median=function(t){var n,i;return i=t.slice(),i.sort(function(t,n){return t-n}),n=Math.floor(i.length/2),i.length%2?i[n]:(i[n-1]+i[n])/2},E.sum=function(t){for(var n=0,i=0;i<t.length;i++)n+=t[i];return n},E.min=function(t){for(var n=Number.POSITIVE_INFINITY,i=0;i<t.length;i++)t[i]<n&&(n=t[i]);return n},E.max=function(t){for(var n=Number.NEGATIVE_INFINITY,i=0;i<t.length;i++)t[i]>n&&(n=t[i]);return n},E.linspace=function(t,n,i){var r,e=[];r=Math.round((n-t)/i)+1,e[0]=t,e[r-1]=n;for(var a=1;r-1>a;a++)e[a]=t+i*a;return e},v.figure=function(){return new c},v.canvas=function(t){if(!t)throw new Error("canvas()::figure selection not provided. Unable to initialize canvas generator.");if(!(t instanceof c))throw new Error("canvas()::invalid input parameter. Parameter must be a Figure instance.");return new o(t)},v.graph=function(t){if(!t)throw new Error("graph()::canvas selection not provided. Unable to initialize graph constructor.");if(!(t instanceof o))throw new Error("graph()::invalid input parameter. Argument must be a Canvas instance.");return new u(t)},v.multipanel=function(t){if(!t)throw new Error("multipanel()::canvas not provided. Unable to initialize multipanel constructor.");if(!(t instanceof o))throw new Error("multipanel()::invalid input parameter. Input argument must be a Canvas instance.");return new d(t)},v.data=function(t){if(!t)throw new Error("data()::data not provided. Unable to initialize data constructor.");if(!(t instanceof Array))throw new Error("data()::invalid input parameter. Input data must be an Array.");return new s(t)},v.axes=function(t){if(!t)throw new Error("axes()::graph not provided. Unable to initialize axes constructor.");if(!(t instanceof u))throw new Error("axes()::invalid input parameter. Input argument must be a Graph instance.");return new a(t)},v.area=function(t){if(!t)throw new Error("area()::graph not provided. Unable to initialize area constructor.");if(!(t instanceof u))throw new Error("area()::invalid input parameter. Input argument must be a Graph instance.");return new h(t)},v.line=function(t){if(!t)throw new Error("line()::graph not provided. Unable to initialize line constructor.");if(!(t instanceof u))throw new Error("line()::invalid input parameter. Input argument must be a Graph instance.");return new f(t)},v.rug=function(t){if(!t)throw new Error("rug()::graph not provided. Unable to initialize rug constructor.");if(!(t instanceof u))throw new Error("rug()::invalid input parameter. Input argument must be a Graph instance.");return new p(t)},v.histogram=function(t){if(!t)throw new Error("histogram()::graph not provided. Unable to initialize histogram constructor.");if(!(t instanceof u))throw new Error("histogram()::invalid input parameter. Input argument must be a Graph instance.");return new l(t)},v.timeserieshistogram=function(t){if(!t)throw new Error("timeserieshistogram()::graph not provided. Unable to initialize timeseries histogram constructor.");if(!(t instanceof u))throw new Error("timeserieshistogram()::invalid input parameter. Input argument must be a Graph instance.");return new g(t)},v.annotations=function(t){if(!t)throw new Error("annotations()::parent instance not provided. Unable to initialize annotations constructor.");if(!(t instanceof o||t instanceof u||t instanceof m))throw new Error("annotations()::invalid input parameter. Input argument must be ether a Canvas, Graph, or Panel instance.");return new i(t)},v.vector=E,"function"==typeof define&&define.amd?define(v):"object"==typeof module&&module.exports?module.exports=v:this.xfig=v}(d3,_);